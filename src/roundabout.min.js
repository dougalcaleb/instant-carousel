let roundabout={on:-1,usedIds:[],overwritten:"no",logged:!1,defaults:{pages:[],breakpoints:[],listenForResize:!1,interpolate:[],id:".myCarousel",parent:"body",lazyLoad:"none",uiEnabled:!0,rotation:"none",type:"slider",infinite:!0,keys:!0,buttons:!0,swipe:!0,swipeThreshold:300,swipeMultiplier:1,swipeResistance:.95,swipeSnap:!0,swipeSpeedThreshold:1200,scrollwheel:!1,pagesToShow:1,pageSpacing:0,pageSpacingUnits:"px",pageSpacingMode:"fill",scrollBy:1,showWrappedPage:!1,transition:300,transitionFunction:"ease",navigation:!0,navigationTrim:!0,navigationBehavior:"nearest",autoscroll:!1,autoscrollSpeed:5e3,autoscrollTimeout:15e3,autoscrollPauseOnHover:!1,autoscrollStartAfter:5e3,autoscrollDirection:"right",throttle:!0,throttleTimeout:300,throttleKeys:!0,throttleSwipe:!0,throttleButtons:!0,throttleNavigation:!0,nextHTML:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>',prevHTML:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z" /></svg>',initOnly:!1,ignoreErrors:!1}};class Roundabout{constructor(e=roundabout.defaults){roundabout.overwritten&&"no"==roundabout.overwritten||console.error('Do not redefine the variable "roundabout". Roundabout requires this variable to store data across multiple carousels.');let t=Object.entries(e),s=Object.entries(roundabout.defaults);this.VERSION="1.4.0",roundabout.logged||console.log(`Using Roundabout version ${this.VERSION} (github.com/dougalcaleb/roundabout)`),roundabout.logged=!0;for(let e=0;e<s.length;e++){let i=!1;for(let o=0;o<t.length;o++){if(!roundabout.defaults.hasOwnProperty(t[o][0]))throw`Error: Invalid Roundabout setting: "${t[o][0]}"`;if(t[o][0].toString()==s[e][0].toString()){this[t[o][0].toString()]=t[o][1],i=!0;break}}!i&&roundabout.defaults.hasOwnProperty(s[e][0])&&(this[s[e][0].toString()]=s[e][1])}if(this._orderedPages=[],this._positions=[],this._orderedPagesMainIndex=0,this._scrollIsAllowed=!0,this.onPage=0,this._handledLoad=!1,this._loadQueue=[],this._loadingPages=!1,this._uniqueId=roundabout.on+1,this._overriddenValues=[],this._currentBp=-2,this._atEnd=!0,this.activeBreakpoint=null,this._calculatedPageSize=null,this._allowInternalStyles=!0,this._allowInternalHTML=!0,this._sx=0,this._ex=0,this._dx=0,this._x=0,this._lastDx=0,this._lastMove=null,this._t=!1,this._dragging=!1,this._canSnap=!1,this._swipeFrom=0,this._swipeIsAllowed=!0,this._sts=0,this._ste=0,this._distPercent=0,this._scrollTimeoutHolder=null,this._scrollIntervalHolder=null,this._scrollAfterTimeoutHolder=null,this._boundFollow=null,this._boundEnd=null,this._boundCancel=null,this._callbacks={scroll:[],scrollEnd:[],dragStart:[],dragEnd:[],scrollNext:[],scrollPrevious:[],scrollNextEnd:[],scrollPreviousEnd:[],load:[],beforeDestroy:[],afterDestroy:[]},!this.initOnly)if(this.initialActions()){try{this.setListeners()}catch(e){console.error(`Error while attempting to add event listeners to Roundabout with id ${this.id}:`),console.error(e)}try{this.setBreakpoints()}catch(e){console.error(`Error while attempting to set breakpoint values in Roundabout with id ${this.id}:`),console.error(e)}}else console.error(`Error while attempting to initialize carousel with id ${this.id}. Ensure the settings are valid.`)}scroll(e,t,s=0){if(e>0&&this.onPage>=this.pages.length-this.pagesToShow&&!this.infinite||e<0&&this.onPage<=0&&!this.infinite||0==e)this.infinite||this.navigationTrim||1!=e||this.setActiveBtn(this.onPage+1);else if(e>0&&e>this.pages.length-this.pagesToShow-this.onPage&&!this.infinite){let s=this.pages.length-this.pagesToShow-this.onPage;this.scroll(s,t,e-s)}else if(e<0&&Math.abs(e)>this.onPage&&!this.infinite){let e=-1*this.onPage;this.scroll(e,t)}else{let i=document.querySelector(`.roundabout-${this._uniqueId}-page-wrap`);this._callbacks.scroll.forEach(t=>{t(e)});let o=[];if(e>0){if("slider"==this.type){for(let e=0;e<this._positions.length;e++)o.push(e-(this.pages.length>2?1:0));this.pages.length>2&&o.push(o.shift()),this.infinite||this.onPage+e+this.pagesToShow!=this.pages.length||(o[o.length-1]=o.length-1)}else if("gallery"==this.type)for(let t=0;t<this._positions.length;t++)t<this.pagesToShow||t>=e&&t<e+this.pagesToShow?o.push(t%this.pagesToShow):o.push(-1);this._callbacks.scrollNext.forEach(t=>{t(e)})}else if(e<0){if("slider"==this.type){for(let t=0;t<this._positions.length;t++)o.push(t-Math.abs(e));for(let t=0;t<Math.abs(e);t++)o.push(o.shift())}else if("gallery"==this.type)for(let t=0;t<this._positions.length;t++)t<this.pagesToShow||t>=this._positions.length+e&&t<this._positions.length+e+this.pagesToShow?o.push(t%this.pagesToShow):o.push(-1);this._callbacks.scrollPrevious.forEach(t=>{t(e)})}for(let t=0;t<this._positions.length;t++){let s="slider"==this.type?this.calcPagePos(o[t],{raw:!0}):this.calcPagePos(o[t],{direction:e});"0px"!=s&&document.querySelector(`.roundabout-${this._uniqueId}-page-${this._orderedPages[t]}`).classList.remove(`roundabout-${this._uniqueId}-hidden-page`),"gallery"==this.type&&(t<this.pagesToShow?document.querySelector(`.roundabout-${this._uniqueId}-page-${this._orderedPages[t]}`).classList.add("roundabout-fadeout"):document.querySelector(`.roundabout-${this._uniqueId}-page-${this._orderedPages[t]}`).classList.remove("roundabout-fadeout")),document.querySelector(`.roundabout-${this._uniqueId}-page-${this._orderedPages[t]}`).style.left=s}this.navigationTrim&&(s=0),t||"slider"!=this.type||(i.style.left=this.calcPagePos(-e,{wrap:!0}));for(let t=0;t<Math.abs(e);t++)e>0?(this._positions.unshift(this._positions.pop()),this._orderedPages.push(this._orderedPages.shift())):e<0&&(this._positions.push(this._positions.shift()),this._orderedPages.unshift(this._orderedPages.pop()));for(let e=0;e<this.pagesToShow;e++)document.querySelector(`.roundabout-${this._uniqueId}-visible-page-${e}`).classList.remove(`roundabout-${this._uniqueId}-visible-page-${e}`),document.querySelector(`.roundabout-${this._uniqueId}-page-${this._orderedPages[e]}`).classList.add(`roundabout-${this._uniqueId}-visible-page-${e}`);this.onPage+=e,this._lastDx=0,e>0&&this.onPage>=this.pages.length?this.onPage-=this.pages.length:e<0&&this.onPage<0&&(this.onPage+=this.pages.length),t?(this.positionWrap(!t),this.positionPages()):setTimeout(()=>{"slider"==this.type&&this.positionWrap(!t),this.positionPages(),this._callbacks.scrollEnd.forEach(e=>{e()}),e>0?this._callbacks.scrollNextEnd.forEach(e=>{e()}):e<0&&this._callbacks.scrollPreviousEnd.forEach(e=>{e()})},this.transition),this.navigation&&this.setActiveBtn("slider"==this.type?this.onPage+s:Math.floor(this.onPage/this.pagesToShow)%Math.floor(this.pages.length/this.pagesToShow)),"hidden"!=this.lazyLoad&&"lazy-hidden"!=this.lazyLoad||Math.abs(e)!=this.scrollBy||(e>0?this.load(this._orderedPages.slice(this.pagesToShow,this.pagesToShow+this.scrollBy)):e<0&&this.load(this._orderedPages.slice(this._orderedPages.length-this.scrollBy,this._orderedPages.length)))}}scrollTo(e,t=!0){this._scrollIsAllowed&&this.throttleNavigation&&this.navigation?this.setActiveBtn("slider"==this.type?this.onPage:Math.floor(this.onPage/this.pagesToShow)%Math.floor(this.pages.length/this.pagesToShow)):!this.throttleNavigation&&this.navigation&&this.setActiveBtn("slider"==this.type?this.onPage:Math.floor(this.onPage/this.pagesToShow)%Math.floor(this.pages.length/this.pagesToShow)),this.infinite&&"direction"!=this.navigationBehavior?this.findOffset(this.onPage,e,"p")<this.findOffset(this.onPage,e,"n")?this.throttleNavigation?this.scrollHandler(this,"scrollto",-1*this.findOffset(this.onPage,e,"p"),t):this.scroll(-1*this.findOffset(this.onPage,e,"p"),t):this.throttleNavigation?this.scrollHandler(this,"scrollto",this.findOffset(this.onPage,e,"n")):this.scroll(this.findOffset(this.onPage,e,"n"),t):this.throttleNavigation?this.scrollHandler(this,"scrollto",e-this.onPage):this.scroll(e-this.onPage,t),this.load([...this._orderedPages.slice(0,this.pagesToShow+this.scrollBy),...this._orderedPages.slice(this._orderedPages.length-this.scrollBy)])}setActiveBtn(e){document.querySelector(`.roundabout-${this._uniqueId}-active-nav-btn`).classList.add(`roundabout-${this._uniqueId}-inactive-nav-btn`,"roundabout-inactive-nav-btn"),document.querySelector(`.roundabout-${this._uniqueId}-active-nav-btn`).classList.remove(`roundabout-${this._uniqueId}-active-nav-btn`,"roundabout-active-nav-btn"),document.querySelector(`.roundabout-${this._uniqueId}-nav-btn-${e}`).classList.add(`roundabout-${this._uniqueId}-active-nav-btn`,"roundabout-active-nav-btn"),document.querySelector(`.roundabout-${this._uniqueId}-nav-btn-${e}`).classList.remove(`roundabout-${this._uniqueId}-inactive-nav-btn`,"roundabout-inactive-nav-btn")}scrollHandler(e,t,s,i=!0){let o;"snap"==t?s>0?o=1:s<0&&(o=-1):"scrollto"==t?o=s:s>0?o=e.scrollBy:s<0&&(o=-e.scrollBy),e.resetScrollTimeout(),!e._scrollIsAllowed||e._dragging&&"follow"!=t||(e.scroll(o,!i),(e.throttle&&e.throttleButtons&&"key"!=t||e.throttle&&e.throttleKeys&&"key"==t)&&(e._scrollIsAllowed=!1,setTimeout(()=>{e._scrollIsAllowed=!0},e.throttleTimeout)))}resetScrollTimeout(e=!1){clearTimeout(this._scrollTimeoutHolder),clearInterval(this._scrollIntervalHolder),this._scrollTimeoutHolder=setTimeout(()=>{e&&this.scrollAuto(this),this.setAutoScroll(this)},this.autoscrollTimeout)}setAutoScroll(e,t=!1){t&&e.autoscroll?e._scrollAfterTimeoutHolder=setTimeout(()=>{e.scrollAuto(e),e._scrollIntervalHolder=setInterval(()=>{e.scrollAuto(e)},e.autoscrollSpeed)},e.autoscrollStartAfter):e.autoscroll&&(e._scrollIntervalHolder=setInterval(()=>{e.scrollAuto(e)},e.autoscrollSpeed))}scrollAuto(e){"left"==e.autoscrollDirection.toLowerCase()&&e._scrollIsAllowed?e.scroll(-this.scrollBy):"right"==e.autoscrollDirection.toLowerCase()&&e._scrollIsAllowed&&e.scroll(this.scrollBy)}setTouch(e,t){e.preventDefault(),t._t=!0,t.tStart(e,t)}tStart(e,t){if(this._callbacks.dragStart.forEach(e=>{e()}),t.resetScrollTimeout(),t.throttleSwipe){if(!t._swipeIsAllowed)return;t.throttle&&(t._swipeIsAllowed=!1)}t.swipeSpeedThreshold>0&&(t._sts=Date.now()),e.preventDefault(),t._dragging=!0,t._swipeFrom=t._orderedPages[t._orderedPagesMainIndex],document.querySelector(`.roundabout-${t._uniqueId}-page-wrap`).classList.remove(`roundabout-${this._uniqueId}-has-transition`),document.querySelector(`.roundabout-${t._uniqueId}-page-wrap`).classList.add("roundabout-has-no-transition"),t._lastMove=e.touches,t._t?("none"==t.rotation?t._sx=e.touches[0].clientX:t._sx=t.rotation*e.touches[0].clientY,"none"==t.rotation?t._x=e.touches[0].clientX:t._x=t.rotation*e.touches[0].clientY):("none"==t.rotation?t._x=e.clientX:t._x=t.rotation*e.clientY,"none"==t.rotation?t._sx=e.clientX:t._sx=t.rotation*e.clientY),document.addEventListener("mousemove",t._boundFollow,!1),document.addEventListener("mouseup",t._boundEnd,!1),t._t&&(document.addEventListener("touchmove",t._boundFollow,!1),document.addEventListener("touchend",t._boundEnd,!1),document.addEventListener("touchcancel",t._boundEnd,!1))}follow(e,t){if(t._dragging){t._t?"none"==t.rotation?t._x=e.changedTouches[0].clientX:t._x=t.rotation*e.changedTouches[0].clientY:"none"==t.rotation?t._x=e.clientX:t._x=t.rotation*e.clientY,t._dx=(t._x-t._sx)*t.swipeMultiplier,!t.infinite&&(t.onPage==t.pages.length-t.pagesToShow&&t._dx<-1*t._lastDx||0==t.onPage&&t._dx>-1*t._lastDx)?t._atEnd=!0:t._atEnd=!1,Math.abs(t._dx)<document.querySelector(t.parent).offsetWidth&&t.infinite?t._dx=(t._x-t._sx)*t.swipeMultiplier:t._dx<0&&!t.infinite?t.infinite?t._dx-=(t._dx+document.querySelector(t.parent).offsetWidth)*t.swipeResistance:t.pages.length-t.pagesToShow==t.onPage&&(1==t.swipeResistance?t._dx=0:t._atEnd&&(t._dx-=(t._dx+t._lastDx)*t.swipeResistance)):t._dx>0&&!t.infinite&&(t.infinite?t._dx-=(t._dx-document.querySelector(t.parent).offsetWidth)*t.swipeResistance:0===t._orderedPages[t._orderedPagesMainIndex]&&(1==t.swipeResistance?t._dx=0:t._atEnd&&(t._dx-=(t._dx+t._lastDx)*t.swipeResistance))),t._dx+=t._lastDx;let s=Math.abs(t._dx);t.checkCanSnap(t),t._distPercent=s/t._calculatedPageSize,0!=t._distPercent&&t.interpolate.length>0&&(t._distPercent>1&&(t._distPercent=1),t.interpolate.forEach(e=>{if(t._dx>0){document.querySelector(`.roundabout-${t._uniqueId}-visible-page-${e.between[0][0]}`).style.transition=e.value+" 0s";let s=(e.between[1][1]-e.between[0][1])*t._distPercent+e.between[0][1],i=e.unit.replace("$",s);document.querySelector(`.roundabout-${t._uniqueId}-visible-page-${e.between[0][0]}`).style[e.value]=i}else if(t._dx<0){document.querySelector(`.roundabout-${t._uniqueId}-visible-page-${e.between[1][0]}`).style.transition=e.value+" 0s";let s=(e.between[0][1]-e.between[1][1])*t._distPercent+e.between[1][1],i=e.unit.replace("$",s);document.querySelector(`.roundabout-${t._uniqueId}-visible-page-${e.between[1][0]}`).style[e.value]=i}}));let i=document.querySelector(`.roundabout-${t._uniqueId}-page-`+t._orderedPages[t._orderedPagesMainIndex]).offsetWidth+t.pageSpacing;s>=i&&t.infinite&&"slider"==t.type||s>=i&&!t.infinite&&(t.onPage<t.pages.length-t.pagesToShow||t.onPage==t.pages.length-t.pagesToShow&&t._dx>0)&&(t.onPage>0||0==t.onPage&&t._dx<0)||s>=t.swipeThreshold&&"gallery"==t.type?(t._dx>0?"slider"==t.type?t.scroll(-1,!0):"gallery"==t.type&&t.scrollHandler(t,"follow",-t.scrollBy):t._dx<0&&("slider"==t.type?t.scroll(1,!0):"gallery"==t.type&&t.scrollHandler(t,"follow",t.scrollBy)),t._sx=1*t._x,t._dx=0,t._lastDx=0):"slider"==t.type&&(document.querySelector(`.roundabout-${t._uniqueId}-page-wrap`).style.left=t._dx+"px")}}checkCanSnap(e,t=!1){let s=Math.abs(e._dx);e.swipeSnap?s>=e.swipeThreshold&&e.infinite||t&&e.infinite||(s>=e.swipeThreshold||t)&&!e.infinite&&(e.onPage<e.pages.length-e.pagesToShow||e.onPage==e.pages.length-e.pagesToShow&&e._dx>0)&&(e.onPage>0||0==e.onPage&&e._dx<0)?t&&Math.abs((e._ex-e._sx)/(e._ste-e._sts)*1e3)>e.swipeSpeedThreshold?e._canSnap=!0:t?e._canSnap=!1:t||(e._canSnap=!0):e._canSnap=!1:!e.infinite&&(e.onPage==e.pages.length-e.pagesToShow&&e._dx<0||0==e.onPage&&e._dx>0)?e._canSnap=!1:e._canSnap=!0}tEnd(e,t){if(t._callbacks.dragEnd.forEach(e=>{e()}),setTimeout(()=>{t._swipeIsAllowed=!0},t.throttleTimeout),t.interpolate.length>0)for(let e=0;e<t.pages.length;e++){let s="";t.interpolate.forEach(i=>{s.includes(i.value)||(s+=i.value+" "+t.transition/1e3+"s, "),document.querySelector(`.roundabout-${t._uniqueId}-page-${e}`).style[i.value]=""}),s=s.substr(0,s.length-2)+";",document.querySelector(`.roundabout-${t._uniqueId}-page-${e}`).style.transition="",document.querySelector(`.roundabout-${t._uniqueId}-page-${e}`).style.transition=s}t._distPercent=0,document.querySelector(`.roundabout-${t._uniqueId}-page-wrap`).classList.add(`roundabout-${t._uniqueId}-has-transition`),document.querySelector(`.roundabout-${t._uniqueId}-page-wrap`).classList.remove("roundabout-has-no-transition"),t._dragging=!1,t._t?"none"==t.rotation?t._ex=e.changedTouches[0].clientX:t._ex=t.rotation*e.changedTouches[0].clientY:"none"==t.rotation?t._ex=e.clientX:t._ex=t.rotation*e.clientY,t.swipeSnap||(t._lastDx=1*t._dx),t.swipeSpeedThreshold>0&&Math.abs(t._dx)<t.swipeThreshold&&(t._ste=Date.now(),t.checkCanSnap(t,!0)),(("slider"==t.type||"gallery"==t.type&&Math.abs(t._dx)<t.swipeThreshold)&&t.swipeSnap||!t.swipeSnap&&!t._canSnap&&t._atEnd)&&(t.snap(t._canSnap,t._dx,t),t.swipeSnap||(t._lastDx=0)),t.resetSwipeVars(t),document.removeEventListener("mousemove",t._boundFollow,!1),document.removeEventListener("mouseup",t._boundEnd,!1),document.removeEventListener("touchmove",t._boundFollow,!1),document.removeEventListener("touchend",t._boundEnd,!1),document.removeEventListener("touchcancel",t._boundCancel,!1)}snap(e,t,s){e?t>0?("slider"==s.type&&s.positionWrap(!1,1),s.scrollHandler(s,"slider"==s.type?"snap":"snap-g","slider"==s.type?-1:-s.scrollBy)):t<0&&("slider"==s.type&&s.positionWrap(!1,-1),s.scrollHandler(s,"slider"==s.type?"snap":"snap-g","slider"==s.type?1:s.scrollBy)):"slider"==s.type&&s.positionWrap(!1,0)}resetSwipeVars(e){e.swipeSnap&&(e._sx=0,e._ex=0,e._x=0,e._dx=0),e._lastMove=[],e._t=!1,e._canSnap=!1}_execMM(e){this.follow(e,this)}_execMU(e){this.tEnd(e,this)}defaultHTML(e){let t=document.createElement("DIV"),s="",i="",o="";this.buttons&&(o=`<div class="roundabout-${this._uniqueId}-btn-next roundabout-btn-next roundabout-scroll-btn">${this.nextHTML}</div><div class="roundabout-${this._uniqueId}-btn-prev roundabout-btn-prev roundabout-scroll-btn">${this.prevHTML}</div>`),this.uiEnabled&&(s=`<div class="roundabout-${this._uniqueId}-ui roundabout-ui">${o}</div>`),this.swipe&&(i=`<div class="roundabout-${this._uniqueId}-swipe-overlay roundabout-swipe-overlay"></div>`);let n=`${i}<div class="roundabout-${this._uniqueId}-page-wrap roundabout-page-wrap roundabout-${this._uniqueId}-has-transition"></div>${s}`;if(e)t=document.querySelector(this.id),t.innerHTML=n;else{if(t.innerHTML=n,t.classList.add("roundabout-wrapper"),"#"==this.id.split("")[0]){let e=this.id.split("");e.shift(),e=e.join(""),t.setAttribute("id",e)}else{let e=this.id.split("");e.shift(),e=e.join(""),t.classList.add(e)}document.querySelector(this.parent).appendChild(t),document.querySelector(this.id).style.position="relative",document.querySelector(this.id).style.overflow="hidden"}document.querySelector(`.roundabout-${this._uniqueId}-page-wrap`).style.height="100%",document.querySelector(`.roundabout-${this._uniqueId}-page-wrap`).style.width="100%",document.querySelector(`.roundabout-${this._uniqueId}-page-wrap`).style.position="absolute",document.querySelector(`.roundabout-${this._uniqueId}-page-wrap`).style.left="0"}internalCSS(){let e=`.roundabout-${this._uniqueId}-has-transition {transition:${this.transition/1e3}s;transition-timing-function:${this.transitionFunction}}.roundabout-has-no-transition{transition: left 0s; !important}.roundabout-error-message {position:relative;margin:auto;left:0;right:0;top:0;bottom:0;border-radius:5px;border:3px solid black;background: white;text-align:center;font-family:sans-serif;width:30%;}`;if("gallery"==this.type){e+=`.roundabout-${this._uniqueId}-hidden-page {opacity: 0; z-index: 0; visibility: hidden;} .roundabout-fadeout {opacity: 0}`;for(let t=0;t<this.pagesToShow;t++)e+=`.roundabout-${this._uniqueId}-page-wrap .roundabout-${this._uniqueId}-visible-page-${t} {z-index: 1}`}else"slider"==this.type&&(e+=`.roundabout-${this._uniqueId}-hidden-page {visibility: hidden;}`);let t=document.createElement("STYLE");t.setAttribute("type","text/css"),t.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(t)}generatePages(){let e="";for(let t=0;t<this.pages.length;t++){let s,i,o,n=document.createElement("DIV");n.classList.add(`roundabout-${this._uniqueId}-page-${t}`,"roundabout-page",`roundabout-${this._uniqueId}-page`),"evenly"==this.pageSpacingMode?(i=1,o=0):(i=-1,o=-1);let a="calc((100% - "+(this.pagesToShow+i)*this.pageSpacing+this.pageSpacingUnits+") / "+this.pagesToShow+")";if(n.style.width=a,"slider"==this.type?t<=this.pagesToShow+2&&(s="calc((((100% - "+(this.pagesToShow+i)*this.pageSpacing+this.pageSpacingUnits+") / "+this.pagesToShow+") * "+(t-1)+") + "+(this.pageSpacing*(t+o)+this.pageSpacingUnits)+")"):"gallery"==this.type&&(s=this.calcPagePos(t)),n.style.position="absolute",this.pages[t].backgroundImage&&"none"==this.lazyLoad||this.pages[t].backgroundImage&&"hidden"==this.lazyLoad&&(t<this.pagesToShow+this.scrollBy||t>=this.pages.length-this.scrollBy))n.style.backgroundImage="url("+this.pages[t].backgroundImage+")",this.pages[t].isLoaded=!0;else if("lazy-hidden"!=this.lazyLoad||this._handledLoad)"all"!=this.lazyLoad||this._handledLoad||(this._handledLoad=!0,window.addEventListener("load",()=>{this.load(this._orderedPages)}));else{let e=[];for(let t=-this.scrollBy;t<this.pagesToShow+this.scrollBy;t++){let s=t;t<0&&(s=this.pages.length+t),e.push(s)}window.addEventListener("load",()=>{this.load(e)}),this._handledLoad=!0}this.pages[t].html&&(n.innerHTML=this.pages[t].html,this.pages[t].css&&(e+=this.pages[t].css)),"gallery"==this.type&&(n.style.transition=`opacity ${this.transition/1e3}s ${this.transitionFunction}`),document.querySelector(`.roundabout-${this._uniqueId}-page-wrap`).appendChild(n),this._orderedPages.push(t),"slider"==this.type?t<=this.pagesToShow+1?this._positions.push(s):this._positions.push("0px"):"gallery"==this.type&&(t<this.pagesToShow?this._positions.push(s):this._positions.push("0px")),t<this.pagesToShow&&document.querySelector(`.roundabout-${this._uniqueId}-page-${this._orderedPages[t]}`).classList.add(`roundabout-${this._uniqueId}-visible-page-${t}`)}"gallery"==this.type&&(document.querySelector(`.roundabout-${this._uniqueId}-page-wrap`).style.left=this.calcPagePos(0,{forceType:"slider"}));let t=document.createElement("STYLE");if(t.setAttribute("type","text/css"),t.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(t),this.navigation&&this.uiEnabled){let e,t=document.createElement("div");t.classList.add(`roundabout-${this._uniqueId}-nav-wrap`,"roundabout-nav-wrap"),document.querySelector(`.roundabout-${this._uniqueId}-ui`).appendChild(t);let s=1;"slider"==this.type?e=this.infinite||!this.navigationTrim?this.pages.length:this.pages.length-(this.pagesToShow-1):"gallery"==this.type&&(s=this.pagesToShow,e=Math.floor(this.pages.length/this.pagesToShow));for(let i=0;i<e;i++){let e=document.createElement("div");0==i?e.classList.add(`roundabout-${this._uniqueId}-active-nav-btn`,"roundabout-active-nav-btn"):e.classList.add(`roundabout-${this._uniqueId}-inactive-nav-btn`,"roundabout-inactive-nav-btn"),e.classList.add(`roundabout-${this._uniqueId}-nav-btn`,`roundabout-${this._uniqueId}-nav-btn-${i}`,"roundabout-nav-btn"),t.appendChild(e),e.addEventListener("click",()=>{this.scrollTo(i*s)})}}"slider"==this.type&&this._positions.push(this._positions.shift()),this.positionPages()}destroy(e=!0,t=!1){if(this._callbacks.beforeDestroy.forEach(e=>{e()}),clearTimeout(this._scrollTimeoutHolder),clearInterval(this._scrollIntervalHolder),clearTimeout(this._scrollAfterTimeoutHolder),this.pages.forEach(e=>{e.isLoaded=!1}),t)document.querySelector(this.id).remove();else if(document.querySelector(this.id).innerHTML="",e){this._positions=[],this._orderedPages=[];try{this.initialActions(!0)&&this.setListeners(!0)}catch(e){console.error(`Error while attempting to regenerate Roundabout with id ${this.id}:`),console.error(e)}}this._callbacks.afterDestroy.forEach(e=>{e()})}setBreakpoints(){let e={width:-1};this.breakpoints.forEach(t=>{t.hasOwnProperty("width")||console.error("Breakpoint is missing a 'width' property, which defines the screen or window size to apply at."),(window.innerWidth<=t.width||screen.width<=t.width)&&(t.width<=e.width||-1==e.width)&&(e=t)}),this._currentBp!=e.width&&(this._currentBp=e.width,-1==e.width?this.activeBreakpoint={}:this.activeBreakpoint=e,this.applyBreakpoint(e))}applyBreakpoint(e){for(let e=0;e<this._overriddenValues.length;e++)this[this._overriddenValues[e][0]]=this._overriddenValues[e][1];this._overriddenValues=[];let t=Object.entries(this),s=Object.entries(e);for(let e=0;e<s.length;e++)for(let i=0;i<t.length;i++)s[e][0].toString()==t[i][0].toString()&&(this._overriddenValues.push([s[e][0].toString(),this[s[e][0]]]),this[s[e][0].toString()]=s[e][1]);this.destroy()}initialActions(e=!1){if(this._allowInternalStyles&&this.internalCSS(),this.checkForErrors(e)){e||roundabout.on++,this._allowInternalHTML&&this.defaultHTML(e),this.autoscroll&&this.setAutoScroll(this,e),this.uiEnabled||(this.navigation=!1,this.swipe=!1),"left"==this.rotation?this.rotation=-1:"right"==this.rotation&&(this.rotation=1),"gallery"==this.type&&(this.scrollBy=this.pagesToShow);try{this.generatePages()}catch(e){console.error(`Error while attempting to generate Roundabout with id ${this.id}:`),console.error(e)}return this.interpolate.forEach(e=>{e.between[0][0]>e.between[1][0]&&this.interpolate[this.interpolate.indexOf(e)].between.push(this.interpolate[this.interpolate.indexOf(e)].between.shift())}),this._boundFollow=this._execMM.bind(this),this._boundEnd=this._execMU.bind(this),this._boundCancel=this._execMU.bind(this),!0}return!1}setListeners(e=!1){this.uiEnabled&&this.buttons&&(document.querySelector(`.roundabout-${this._uniqueId}-btn-next`).addEventListener("click",()=>{this.scrollHandler(this,"listener",this.scrollBy)}),document.querySelector(`.roundabout-${this._uniqueId}-btn-prev`).addEventListener("click",()=>{this.scrollHandler(this,"listener",-this.scrollBy)})),this.keys&&!e&&document.addEventListener("keydown",e=>{this.keyListener(e)}),this.listenForResize&&!e&&setTimeout(()=>{window.addEventListener("resize",()=>{this.setBreakpoints()})},0),this.scrollwheel&&document.querySelector(this.id).addEventListener("wheel",e=>{e.preventDefault(),e.deltaY>0&&this.scrollHandler(this,"scroll",1),e.deltaY<0&&this.scrollHandler(this,"wheel",-1)}),e||(this._calculatedPageSize=document.querySelector(`.roundabout-${this._uniqueId}-page-0`).offsetWidth,setTimeout(()=>{window.addEventListener("resize",()=>{this._calculatedPageSize=document.querySelector(`.roundabout-${this._uniqueId}-page-0`).offsetWidth})},0)),this.autoscrollPauseOnHover&&(document.querySelector(this.parent).addEventListener("mouseover",()=>{this._scrollIsAllowed=!1}),document.querySelector(this.parent).addEventListener("mouseout",()=>{this._scrollIsAllowed=!0,this.resetScrollTimeout(!0)})),this.swipe&&(document.querySelector(`.roundabout-${this._uniqueId}-swipe-overlay`).addEventListener("mousedown",e=>{this.tStart(e,this)},{capture:!1}),document.querySelector(`.roundabout-${this._uniqueId}-swipe-overlay`).addEventListener("touchstart",e=>{this.setTouch(e,this)},{capture:!1}),document.querySelectorAll(`.roundabout-${this._uniqueId}-page`).forEach(e=>{e.addEventListener("mousedown",e=>{this.tStart(e,this)},{capture:!1}),e.addEventListener("touchstart",e=>{this.setTouch(e,this)},{capture:!1})}))}checkForErrors(e){return!!this.ignoreErrors||(this.pages.length<2?(this.displayError("The minimum number of pages supported is 2."),!1):this.pages.length-this.pagesToShow<=0?(this.displayError("Too many pages are being displayed at once. There must be at least 2 fewer pages shown than the number of total pages."),!1):2==this.pages.length&&this.swipe&&"slider"==this.type?(this.displayError("Swipe is not supported on sliders with 2 pages."),!1):(0!=this.pages.length&&this.pages.length||this.displayError("No pages have been supplied. Please create a 'pages' array containing your pages. See the documentation for details."),"#"!==this.id.split("")[0]&&"."!==this.id.split("")[0]?(this.displayError("An invalid selector prefix was given for the parent. Valid selector prefixes are '#' for IDs or '.' for classes."),!1):roundabout.usedIds.includes(this.id)&&!e?(this.displayError(`The selector '${this.id}' is already in use by another carousel. Please use a unique selector.`),!1):(roundabout.usedIds.push(this.id),this.pagesToShow<this.scrollBy&&"slider"==this.type?(this.displayError("'scrollBy' must be less than or equal to 'pagesToShow'."),!1):"gallery"==this.type&&this.navigation&&this.pages.length%this.pagesToShow!=0?(this.displayError("To enable navigation on 'gallery' mode carousels, the total number of pages must be divisible by the number of pages shown. This prevents different groups of pages corresponding the same navigation bubble."),!1):!("gallery"==this.type&&this.interpolate.length>0)||(this.displayError("Interpolation is not supported by 'gallery' mode carousels."),!1))))}load(e=[],t=!1){if(e.forEach(e=>{this._loadQueue.includes(e)||this._loadQueue.push(e)}),0!=this._loadQueue.length){if(this._loadingPages||(t=!0),t)if(this.pages[this._loadQueue[0]].isLoaded)this._loadQueue=this._loadQueue.splice(1,this._loadQueue.length-1),this.load(this._loadQueue,!0);else{this._loadingPages=!0;let e=new Image;e.onload=(()=>{document.querySelector(`.roundabout-${this._uniqueId}-page-${this._loadQueue[0]}`).style.backgroundImage="url("+e.src+")",document.querySelector(`.roundabout-${this._uniqueId}-page-${this._loadQueue[0]}`).style.backgroundSize="cover",document.querySelector(`.roundabout-${this._uniqueId}-page-${this._loadQueue[0]}`).style.backgroundPosition="center center",this.pages[this._loadQueue[0]].isLoaded=!0,this._callbacks.load.forEach(e=>{e.pageId==this._loadQueue[0]&&e.callback(this._loadQueue[0])}),this._loadQueue=this._loadQueue.splice(1,this._loadQueue.length-1),this.load(this._loadQueue,!0)}),e.src=this.pages[this._loadQueue[0]].backgroundImage}}else this._loadingPages=!1}positionPages(e=!1){for(let e=0;e<this._positions.length;e++)"0px"==this._positions[e]?(document.querySelector(`.roundabout-${this._uniqueId}-page-${e}`).classList.add(`roundabout-${this._uniqueId}-hidden-page`),document.querySelector(`.roundabout-${this._uniqueId}-page-${e}`).style.left=this._positions[e]):(document.querySelector(`.roundabout-${this._uniqueId}-page-${e}`).style.left=this._positions[e],document.querySelector(`.roundabout-${this._uniqueId}-page-${e}`).classList.remove(`roundabout-${this._uniqueId}-hidden-page`),!this.infinite&&0==e&&this.onPage>1&&!this.showWrappedPage&&document.querySelector(`.roundabout-${this._uniqueId}-page-${e}`).classList.add(`roundabout-${this._uniqueId}-hidden-page`),this.infinite||e!=this._positions.length-1||0!=this.onPage||this.showWrappedPage||document.querySelector(`.roundabout-${this._uniqueId}-page-${this._positions.length-1}`).classList.add(`roundabout-${this._uniqueId}-hidden-page`))}positionWrap(e=!0,t=0){let s=document.querySelector(`.roundabout-${this._uniqueId}-page-wrap`);e&&(s.classList.remove(`roundabout-${this._uniqueId}-has-transition`),s.classList.add("roundabout-has-no-transition")),s.style.left=this.calcPagePos(t,{wrap:!0});s.offsetWidth;e&&(s.classList.add(`roundabout-${this._uniqueId}-has-transition`),s.classList.remove("roundabout-has-no-transition"))}findOffset(e,t,s){return"p"==s?t<e?e-t:e+this.pages.length-t:"n"==s?t<e?this.pages.length-e+t:t-e:void 0}keyListener(e){switch(e.key){case"ArrowLeft":this.scrollHandler(this,"key",-this.scrollBy);break;case"ArrowRight":this.scrollHandler(this,"key",this.scrollBy)}}calcPagePos(e,t={wrap:!1,forceType:this.type,direction:null,raw:!1}){if(null==t.forceType&&(t.forceType=this.type),0==e&&"slider"==t.forceType&&!t.raw&&("fill"==this.pageSpacingMode||t.wrap))return"0px";if("gallery"==t.forceType){if(t.direction>0&&e>=2*this.pagesToShow)return"0px";if(t.direction<0&&(e<-this.pagesToShow||e>=this.pagesToShow))return"0px";if(-1==e)return"0px"}"slider"==t.forceType&&(e+=1);let s,i,o,n=0;return"evenly"==this.pageSpacingMode?(s=1,i=0,t.wrap&&(n=-this.pageSpacing)):(s=-1,i="slider"==t.forceType?-1:0),"slider"==t.forceType?o="calc((((100% - "+(this.pagesToShow+s)*this.pageSpacing+this.pageSpacingUnits+") / "+this.pagesToShow+") * "+(e-1)+") + "+(this.pageSpacing*(e+i)+n+this.pageSpacingUnits)+")":"gallery"==t.forceType&&(o="calc((((100% - "+(this.pagesToShow+s)*this.pageSpacing+this.pageSpacingUnits+") / "+this.pagesToShow+") * "+e%this.pagesToShow+") + "+(this.pageSpacing*(e%this.pagesToShow+i)+n+this.pageSpacingUnits)+")"),o}subscribe(e,t){this._callbacks[e].push(t)}displayError(e,t="Error:"){let s=document.createElement("DIV");s.classList.add("roundabout-error-message");let i=document.createElement("SPAN");i.innerHTML=t,i.style.color="red",i.style.fontWeight="bold",s.appendChild(i);let o=document.createElement("SPAN");o.innerHTML=e;let n=document.createElement("BR");s.appendChild(n),s.appendChild(o),document.querySelector(this.parent).appendChild(s),console.error(e)}}