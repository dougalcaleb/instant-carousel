let roundabout={on:-1,usedIds:[]};class Roundabout{constructor(t){this.VERSION="1.2.0",this.pages=t.pages?t.pages:{},this.id=t.id?t.id:".myCarousel",this.type=t.type?t.type:"normal",this.infinite=!1!==t.infinite||t.infinite,this.parent=t.parent?t.parent:"body",this.navigation=!1!==t.navigation||t.navigation,this.navigationTrim=!1!==t.navigationTrim||t.navigationTrim,this.navigationBehavior=t.navigationBehavior&&this.infinite?t.navigationBehavior:"nearest",this.autoscroll=!!t.autoscroll&&t.autoscroll,this.autoscrollSpeed=t.autoscrollSpeed>=0?t.autoscrollSpeed:5e3,this.autoscrollTimeout=t.autoscrollTimeout>=0?t.autoscrollTimeout:15e3,this.autoscrollPauseOnHover=!!t.autoscrollPauseOnHover&&t.autoscrollPauseOnHover,this.autoscrollStartAfter=t.autoscrollStartAfter>=0?t.autoscrollStartAfter:5e3,this.autoscrollDirection=t.autoscrollDirection?t.autoscrollDirection:"right",this.transition=t.transition>=0?t.transition:300,this.transitionFunction=t.transitionFunction?t.transitionFunction:"ease",this.throttle=!1!==t.throttle||t.throttle,this.throttleTimeout=t.throttleTimeout>=0?t.throttleTimeout:300,this.throttleMatchTransition=!t.throttleMatchTransition||t.throttleMatchTransition,this.throttleKeys=!1!==t.throttleKeys||t.throttleKeys,this.throttleSwipe=!1!==t.throttleSwipe||t.throttleSwipe,this.throttleButtons=!1!==t.throttleButtons||t.throttleButtons,this.throttleNavigation=!1!==t.throttleNavigation||t.throttleNavigation,this.lazyLoad=t.lazyLoad?t.lazyLoad:"none",this.uiEnabled=!1!==t.uiEnabled||t.uiEnabled,this.nextHTML=t.nextHTML?t.nextHTML:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>',this.prevHTML=t.prevHTML?t.prevHTML:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z" /></svg>',this.keys=!1!==t.keys||t.keys,this.swipe=!1!==t.swipe||t.swipe,this.swipeThreshold=t.swipeThreshold>=0?t.swipeThreshold:300,this.swipeMultiplier=t.swipeMultiplier?t.swipeMultiplier:1,this.swipeResistance=t.swipeResistance>=0?t.swipeResistance:.95,this.pagesToShow=t.pagesToShow?t.pagesToShow:1,this.enlargeCenter=t.enlargeCenter?t.enlargeCenter:100,this.sizeFalloff=t.sizeFalloff?t.sizeFalloff:0,this.pageSpacing=t.pageSpacing?t.pageSpacing:0,this.pageSpacingUnits=t.pageSpacingUnits?t.pageSpacingUnits:"px",this.spacingMode=t.spacingMode?t.spacingMode:"fill",this.scrollBy=t.scrollBy?t.scrollBy:1,this.showWrappedPage=!!t.showWrappedPage&&t.showWrappedPage,this.mobile=t.mobile?t.mobile:{swipeThreshold:50},this.mobileBreakpoint=t.mobileBreakpoint?t.mobileBreakpoint:700,this.orderedPages=[],this.positions=[],this.orderedPagesMainIndex=0,this.scrollIsAllowed=!0,this.onPage=0,this.handledLoad=!1,this.loadQueue=[],this.loadingPages=!1,this.uniqueId=roundabout.on+1,this.allowInternalStyles=!0,this.allowInternalHTML=!0,this.sx=0,this.sy=0,this.ex=0,this.ey=0,this.dx=0,this.x=0,this.y=0,this.lastMove=null,this.t=!1,this.dragging=!1,this.canSnap=!1,this.swipeFrom=0,this.swipeIsAllowed=!0,this.scrollTimeoutHolder=null,this.scrollIntervalHolder=null,this.boundFollow=null,this.boundEnd=null,this.boundCancel=null,this.initialActions();try{this.replaceWithMobile()}catch(t){console.error(`Error while attempting to set mobile breakpoint values in Roundabout with id ${this.id}:`),console.error(t)}try{this.setListeners()}catch(t){console.error(`Error while attempting to add event listeners to Roundabout with id ${this.id}:`),console.error(t)}}scrollNext(t,e=!1,i=0){if(!(this.onPage>=this.pages.length-this.pagesToShow)||this.infinite||"normal"!=this.type)if(t>this.pages.length-this.pagesToShow-this.onPage&&!this.infinite){let t=this.pages.length-this.pagesToShow-this.onPage;this.scrollNext(t,e,this.pages.length-t-this.pagesToShow)}else{let i=document.querySelector(`.roundabout-${this.uniqueId}-page-wrap`);for(let t=0;t<this.positions.length;t++){let e=this.calcPagePos(t);"0px"!=e&&document.querySelector(`.roundabout-${this.uniqueId}-page-${this.orderedPages[t]}`).classList.remove("roundabout-hidden-page"),document.querySelector(`.roundabout-${this.uniqueId}-page-${this.orderedPages[t]}`).style.left=e}e||(i.style.left=this.calcPagePos(-1*t));for(let e=0;e<t;e++)this.positions.unshift(this.positions.pop()),this.orderedPages.push(this.orderedPages.shift());for(let t=0;t<this.pagesToShow;t++)document.querySelector(`.roundabout-${this.uniqueId}-visible-page-${t}`).classList.remove(`roundabout-${this.uniqueId}-visible-page-${t}`),document.querySelector(`.roundabout-${this.uniqueId}-page-${this.orderedPages[t]}`).classList.add(`roundabout-${this.uniqueId}-visible-page-${t}`);this.onPage+=t,this.onPage>=this.pages.length&&(this.onPage-=this.pages.length),e?(this.positionWrap(!e),this.positionPages()):setTimeout(()=>{this.positionWrap(!e),this.positionPages()},this.transition),this.navigation&&this.setActiveBtn(this.onPage),"hidden"==this.lazyLoad&&this.load(this.orderedPages.slice(this.pagesToShow,this.pagesToShow+this.scrollBy))}}scrollPrevious(t,e=!1){if(!(this.onPage<=0)||this.infinite||"normal"!=this.type)if(Math.abs(t)>this.onPage&&!this.infinite){let t=-1*this.onPage;this.scrollPrevious(t,e)}else{let i=document.querySelector(`.roundabout-${this.uniqueId}-page-wrap`),s=[];for(let e=0;e<this.positions.length;e++)s.push(e-Math.abs(t));for(let e=0;e<Math.abs(t);e++)s.push(s.shift());for(let t=0;t<this.positions.length;t++){let e=this.calcPagePos(s[t]);"0px"!=e&&document.querySelector(`.roundabout-${this.uniqueId}-page-${this.orderedPages[t]}`).classList.remove("roundabout-hidden-page"),document.querySelector(`.roundabout-${this.uniqueId}-page-${this.orderedPages[t]}`).style.left=e}e||(i.style.left=this.calcPagePos(-1*t));for(let e=0;e<Math.abs(t);e++)this.positions.push(this.positions.shift()),this.orderedPages.unshift(this.orderedPages.pop());this.onPage+=t,this.onPage<0&&(this.onPage+=this.pages.length),e?(this.positionWrap(!e),this.positionPages()):setTimeout(()=>{this.positionWrap(!e),this.positionPages()},this.transition),this.navigation&&this.setActiveBtn(this.onPage),"hidden"==this.lazyLoad&&this.load(this.orderedPages.slice(this.orderedPages.length-this.scrollBy,this.orderedPages.length))}}scrollTo(t){if(this.scrollIsAllowed&&this.throttleNavigation?this.setActiveBtn(t):this.throttleNavigation||this.setActiveBtn(t),"hidden"==this.lazyLoad){let e=[];for(let i=-this.scrollBy;i<this.pagesToShow+this.scrollBy;i++){let s=(i+t)%this.orderedPages.length;s<0&&(s+=this.orderedPages.length),e.push(this.orderedPages[s])}this.load(e)}this.infinite&&"direction"!=this.navigationBehavior?this.findOffset(this.onPage,t,"p")<this.findOffset(this.onPage,t,"n")?this.throttleNavigation?this.previousHandler(this,"scrollto",-1*this.findOffset(this.onPage,t,"p")):this.scrollPrevious(-1*this.findOffset(this.onPage,t,"p")):this.throttleNavigation?this.nextHandler(this,"scrollto",this.findOffset(this.onPage,t,"n")):this.scrollNext(this.findOffset(this.onPage,t,"n")):t<this.onPage?this.throttleNavigation?this.previousHandler(this,"scrollto",t-this.onPage):this.scrollPrevious(t-this.onPage):this.throttleNavigation?this.nextHandler(this,"scrollto",t-this.onPage):this.scrollNext(t-this.onPage)}setActiveBtn(t){document.querySelector(`.roundabout-${this.uniqueId}-active-nav-btn`).classList.add(`roundabout-${this.uniqueId}-inactive-nav-btn`,"roundabout-inactive-nav-btn"),document.querySelector(`.roundabout-${this.uniqueId}-active-nav-btn`).classList.remove(`roundabout-${this.uniqueId}-active-nav-btn`,"roundabout-active-nav-btn"),document.querySelector(`.roundabout-${this.uniqueId}-nav-btn-${t}`).classList.add(`roundabout-${this.uniqueId}-active-nav-btn`,"roundabout-active-nav-btn"),document.querySelector(`.roundabout-${this.uniqueId}-nav-btn-${t}`).classList.remove(`roundabout-${this.uniqueId}-inactive-nav-btn`,"roundabout-inactive-nav-btn")}nextHandler(t,e,i){let s;s="snap"==e?1:"scrollto"==e?i:t.scrollBy,t.resetScrollTimeout(),t.scrollIsAllowed&&!t.dragging&&(t.scrollNext(s,!1),(t.throttle&&t.throttleButtons&&"key"!=e||t.throttle&&t.throttleKeys&&"key"==e)&&(t.scrollIsAllowed=!1,setTimeout(()=>{t.scrollIsAllowed=!0},t.throttleTimeout)))}previousHandler(t,e,i){let s;s="snap"==e?-1:"scrollto"==e?i:-t.scrollBy,t.resetScrollTimeout(),t.scrollIsAllowed&&!t.dragging&&(t.scrollPrevious(s,!1),(t.throttle&&t.throttleButtons&&"key"!=e||t.throttle&&t.throttleKeys&&"key"==e)&&(t.scrollIsAllowed=!1,setTimeout(()=>{t.scrollIsAllowed=!0},t.throttleTimeout)))}resetScrollTimeout(){clearTimeout(this.scrollTimeoutHolder),clearInterval(this.scrollIntervalHolder),this.scrollTimeoutHolder=setTimeout(()=>{this.setAutoScroll(this)},this.autoscrollTimeout)}setAutoScroll(t,e=!1){e&&t.autoscroll?setTimeout(()=>{t.scrollAuto(t),t.scrollIntervalHolder=setInterval(()=>{t.scrollAuto(t)},t.autoscrollSpeed)},t.autoscrollStartAfter):t.autoscroll&&(t.scrollIntervalHolder=setInterval(()=>{t.scrollAuto(t)},t.autoscrollSpeed))}scrollAuto(t){"left"==t.autoscrollDirection.toLowerCase()&&t.scrollIsAllowed?t.scrollPrevious(this.scrollBy):"right"==t.autoscrollDirection.toLowerCase()&&t.scrollIsAllowed&&t.scrollNext(this.scrollBy)}setTouch(t,e){t.preventDefault(),e.t=!0,e.tStart(t,e)}tStart(t,e){if(e.resetScrollTimeout(),e.throttleSwipe){if(!e.swipeIsAllowed)return;e.throttle&&(e.swipeIsAllowed=!1)}t.preventDefault(),e.dragging=!0,e.swipeFrom=e.orderedPages[e.orderedPagesMainIndex],document.querySelector(`.roundabout-${e.uniqueId}-page-wrap`).classList.remove(`roundabout-${this.uniqueId}-has-transition`),document.querySelector(`.roundabout-${e.uniqueId}-page-wrap`).classList.add("roundabout-has-no-transition"),e.lastMove=t.touches,e.t?(e.x=t.touches[0].clientX,e.y=t.touches[0].clientY,e.sx=t.touches[0].clientX,e.sy=t.touches[0].clientY):(e.x=t.clientX,e.y=t.clientY,e.sx=t.clientX,e.sy=t.clientY),document.addEventListener("mousemove",e.boundFollow,!1),document.addEventListener("mouseup",e.boundEnd,!1),e.t&&(document.addEventListener("touchmove",e.boundFollow,!1),document.addEventListener("touchend",e.boundEnd,!1),document.addEventListener("touchcancel",e.boundCancel,!1))}follow(t,e){if(e.dragging){e.t?(e.x=t.changedTouches[0].clientX,e.y=t.changedTouches[0].clientY):(e.x=t.clientX,e.y=t.clientY),e.dx=(e.x-e.sx)*e.swipeMultiplier,Math.abs(e.dx)<document.querySelector(e.parent).offsetWidth&&e.infinite?e.dx=(e.x-e.sx)*e.swipeMultiplier:e.dx<0?e.infinite?e.dx-=(e.dx+document.querySelector(e.parent).offsetWidth)*e.swipeResistance:e.pages.length-e.pagesToShow==e.onPage&&(1==e.swipeResistance?e.dx=0:e.dx-=e.dx*e.swipeResistance):e.dx>0&&(e.infinite?e.dx-=(e.dx-document.querySelector(e.parent).offsetWidth)*e.swipeResistance:0===e.orderedPages[e.orderedPagesMainIndex]&&(1==e.swipeResistance?e.dx=0:e.dx-=e.dx*e.swipeResistance));let i=Math.abs(e.dx);i>=e.swipeThreshold&&e.infinite||i>=e.swipeThreshold&&!e.infinite&&(e.onPage<e.pages.length-e.pagesToShow||e.onPage==e.pages.length-e.pagesToShow&&e.dx>0)&&(e.onPage>0||0==e.onPage&&e.dx<0)?e.canSnap=!0:e.canSnap=!1;let s=document.querySelector(`.roundabout-${e.uniqueId}-page-`+e.orderedPages[e.orderedPagesMainIndex]).offsetWidth+e.pageSpacing;i>=s&&e.infinite||i>=s&&!e.infinite&&(e.onPage<e.pages.length-e.pagesToShow||e.onPage==e.pages.length-e.pagesToShow&&e.dx>0)&&(e.onPage>0||0==e.onPage&&e.dx<0)?(e.dx>0?e.scrollPrevious(-1,!0):e.dx<0&&e.scrollNext(1,!0),e.sx=e.x/1,e.dx=0):document.querySelector(`.roundabout-${e.uniqueId}-page-wrap`).style.left=e.dx+"px"}}tEnd(t,e){setTimeout(()=>{e.swipeIsAllowed=!0},e.throttleTimeout),document.querySelector(`.roundabout-${e.uniqueId}-page-wrap`).classList.add(`roundabout-${this.uniqueId}-has-transition`),document.querySelector(`.roundabout-${e.uniqueId}-page-wrap`).classList.remove("roundabout-has-no-transition"),e.dragging=!1,e.t?(e.ex=t.changedTouches[0].clientX,e.ey=t.changedTouches[0].clientY):(e.ex=t.clientX,e.ey=t.clientY),e.snap(e.canSnap,e.dx,e),e.resetSwipeVars(e),document.removeEventListener("mousemove",e.boundFollow,!1),document.removeEventListener("mouseup",e.boundEnd,!1),document.removeEventListener("touchmove",e.boundFollow,!1),document.removeEventListener("touchend",e.boundEnd,!1),document.removeEventListener("touchcancel",e.boundCancel,!1)}tCancel(t,e){t.preventDefault(),document.removeEventListener("mouseup",t=>{e.tEnd(t,e)},!1),document.removeEventListener("touchend",t=>{e.tEnd(t,e)},!1),document.removeEventListener("touchcancel",t=>{e.tCancel(t,e)},!1)}snap(t,e,i){t?e>0?(i.previousHandler(i,"snap"),i.positionWrap(!1,1)):e<0&&(i.nextHandler(i,"snap"),i.positionWrap(!1,-1)):i.positionWrap(!1,0)}resetSwipeVars(t){t.sx=0,t.sy=0,t.ex=0,t.ey=0,t.x=0,t.y=0,t.dx=0,t.lastMove=[],t.t=!1,t.canSnap=!1}execMM(t){this.follow(t,this)}execMU(t){this.tEnd(t,this)}execTC(t){this.tCancel(t,this)}defaultHTML(){let t=document.createElement("DIV"),e="",i="";this.uiEnabled&&(e=`<div class="roundabout-${this.uniqueId}-ui roundabout-ui"><div class="roundabout-${this.uniqueId}-btn-next roundabout-btn-next roundabout-scroll-btn">${this.nextHTML}</div><div class="roundabout-${this.uniqueId}-btn-prev roundabout-btn-prev roundabout-scroll-btn">${this.prevHTML}</div></div>`),this.swipe&&(i=`<div class="roundabout-${this.uniqueId}-swipe-overlay roundabout-swipe-overlay"></div>`);let s=`${i}<div class="roundabout-${this.uniqueId}-page-wrap roundabout-page-wrap roundabout-${this.uniqueId}-has-transition"></div>${e}`;if(t.innerHTML=s,t.classList.add("roundabout-wrapper"),"#"==this.id.split("")[0]){let e=this.id.split("");e.shift(),e=e.join(""),t.setAttribute("id",e)}else{let e=this.id.split("");e.shift(),e=e.join(""),t.classList.add(e)}document.querySelector(this.parent).appendChild(t),document.querySelector(this.id).style.position="relative",document.querySelector(this.id).style.overflow="hidden",document.querySelector(`.roundabout-${this.uniqueId}-page-wrap`).style.height="100%",document.querySelector(`.roundabout-${this.uniqueId}-page-wrap`).style.width="100%",document.querySelector(`.roundabout-${this.uniqueId}-page-wrap`).style.position="absolute",document.querySelector(`.roundabout-${this.uniqueId}-page-wrap`).style.left="0"}internalCSS(){let t=`.roundabout-${this.uniqueId}-has-transition {transition:${this.transition/1e3}s;transition-timing-function:${this.transitionFunction}}.roundabout-has-no-transition{transition:none;}.roundabout-hidden-page {visibility: hidden}.roundabout-error-message {position:relative;margin:auto;left:0;right:0;top:0;bottom:0;border-radius:5px;border:3px solid black;background: white;text-align:center;font-family:sans-serif;width:30%;}`,e=document.createElement("STYLE");e.setAttribute("type","text/css"),e.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(e)}generatePages(){let t="";for(let e=0;e<this.pages.length;e++){let i,s=document.createElement("DIV");if(s.classList.add(`roundabout-${this.uniqueId}-page-${e}`,"roundabout-page"),"normal"==this.type){let t,o;"evenly"==this.spacingMode?(t=1,o=0):(t=-1,o=-1);let n="calc((100% - "+(this.pagesToShow+t)*this.pageSpacing+this.pageSpacingUnits+") / "+this.pagesToShow+")";s.style.width=n,e<=this.pagesToShow+2&&(i="calc((((100% - "+(this.pagesToShow+t)*this.pageSpacing+this.pageSpacingUnits+") / "+this.pagesToShow+") * "+(e-1)+") + "+(this.pageSpacing*(e+o)+this.pageSpacingUnits)+")")}else s.style.width="100%";s.style.position="absolute",this.pages[e].backgroundImage&&"none"==this.lazyLoad||this.pages[e].backgroundImage&&"hidden"==this.lazyLoad&&(e<this.pagesToShow+this.scrollBy||e>=this.pages.length-this.scrollBy)?(s.style.background="url("+this.pages[e].backgroundImage+")",s.style.backgroundSize="cover",s.style.backgroundPosition="center center",this.pages[e].isLoaded=!0):"all"!=this.lazyLoad||this.handledLoad||(this.handledLoad=!0,window.addEventListener("load",()=>{this.load(this.orderedPages)})),this.pages[e].html&&(s.innerHTML=this.pages[e].html,this.pages[e].css&&(t+=this.pages[e].css)),document.querySelector(`.roundabout-${this.uniqueId}-page-wrap`).appendChild(s),this.orderedPages.push(e),e<=this.pagesToShow+1?this.positions.push(i):this.positions.push("0px"),e<this.pagesToShow&&document.querySelector(`.roundabout-${this.uniqueId}-page-${this.orderedPages[e]}`).classList.add(`roundabout-${this.uniqueId}-visible-page-${e}`)}let e=document.createElement("STYLE");if(e.setAttribute("type","text/css"),e.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(e),this.navigation&&this.uiEnabled){let t,e=document.createElement("div");e.classList.add(`roundabout-${this.uniqueId}-nav-wrap`,"roundabout-nav-wrap"),document.querySelector(`.roundabout-${this.uniqueId}-ui`).appendChild(e),"normal"==this.type&&(t=this.infinite||!this.navigationTrim?this.pages.length:this.pages.length-(this.pagesToShow-1));for(let i=0;i<t;i++){let t=document.createElement("div");0==i?t.classList.add(`roundabout-${this.uniqueId}-active-nav-btn`,"roundabout-active-nav-btn"):t.classList.add(`roundabout-${this.uniqueId}-inactive-nav-btn`,"roundabout-inactive-nav-btn"),t.classList.add(`roundabout-${this.uniqueId}-nav-btn`,`roundabout-${this.uniqueId}-nav-btn-${i}`,"roundabout-nav-btn"),e.appendChild(t),t.addEventListener("click",()=>{this.scrollTo(i)})}}this.positions.push(this.positions.shift()),this.positionPages()}replaceWithMobile(){let t=0;for(let e in this.mobile)this.mobile.hasOwnProperty(e)&&t++;let e=0;for(let t in this)this.hasOwnProperty(t)&&e++;if(screen.width<=this.mobileBreakpoint){let i=Object.entries(this),s=Object.entries(this.mobile);for(let o=0;o<t;o++)for(let t=0;t<e;t++)i[t][0]==s[o][0]&&(this[i[t][0].toString()]=s[o][1])}}initialActions(){if(this.allowInternalStyles&&this.internalCSS(),this.checkForErrors()){roundabout.on++,this.allowInternalHTML&&this.defaultHTML(),this.throttleMatchTransition&&(this.throttleTimeout=this.transition),this.autoscroll&&this.setAutoScroll(this,!0);try{this.generatePages()}catch(t){console.error(`Error while attempting to generate Roundabout with id ${this.id}:`),console.error(t)}this.boundFollow=this.execMM.bind(this),this.boundEnd=this.execMU.bind(this),this.boundCancel=this.execTC.bind(this),"normal"==this.type&&(this.swipeThreshold/=this.pagesToShow)}}setListeners(){this.uiEnabled&&(document.querySelector(`.roundabout-${this.uniqueId}-btn-next`).addEventListener("click",()=>{this.nextHandler(this)}),document.querySelector(`.roundabout-${this.uniqueId}-btn-prev`).addEventListener("click",()=>{this.previousHandler(this)})),this.keys&&document.addEventListener("keydown",t=>{switch(t.key){case"ArrowLeft":this.previousHandler(this,"key");break;case"ArrowRight":this.nextHandler(this,"key")}}),this.autoscrollPauseOnHover&&(document.querySelector(this.parent).addEventListener("mouseover",()=>{this.scrollIsAllowed=!1}),document.querySelector(this.parent).addEventListener("mouseout",()=>{this.scrollIsAllowed=!0,this.resetScrollTimeout()})),this.swipe&&(document.querySelector(`.roundabout-${this.uniqueId}-swipe-overlay`).addEventListener("mousedown",t=>{this.tStart(t,this)},!1),document.querySelector(`.roundabout-${this.uniqueId}-swipe-overlay`).addEventListener("touchstart",t=>{this.setTouch(t,this)},!1))}checkForErrors(){return this.pages.length<2?(this.displayError("The minimum number of pages supported is 2."),!1):this.pages.length-this.pagesToShow<=0?(this.displayError("Too many of the given pages are being displayed. There must be at least 2 fewer pages shown than the number of pages supplied."),!1):this.pages.length<=2&&this.swipe?(this.displayError("Swipe is not supported with fewer than 3 pages"),!1):(0!=this.pages.length&&this.pages.length||this.displayError("No pages have been supplied. Please create a 'pages' array containing your pages. See the documentation for details."),"#"!==this.id.split("")[0]&&"."!==this.id.split("")[0]?(this.displayError("An invalid selector prefix was given for the parent. Valid selector prefixes are '#' for IDs or '.' for classes."),!1):roundabout.usedIds.includes(this.id)?(this.displayError(`The selector ${this.id} is already in use by another carousel. Please use a unique selector.`),!1):(roundabout.usedIds.push(this.id),!(this.pagesToShow<this.scrollBy)||(this.displayError("'scrollBy' must be less than or equal to 'pagesToShow'."),!1)))}load(t=[],e=!1){if(t.forEach(t=>{this.loadQueue.includes(t)||this.loadQueue.push(t)}),0!=this.loadQueue.length){if(this.loadingPages||(e=!0),e)if(this.pages[this.loadQueue[0]].isLoaded)this.loadQueue=this.loadQueue.splice(1,this.loadQueue.length-1),this.load(this.loadQueue,!0);else{this.loadingPages=!0;let t=new Image;t.onload=(()=>{document.querySelector(`.roundabout-${this.uniqueId}-page-${this.loadQueue[0]}`).style.backgroundImage="url("+t.src+")",document.querySelector(`.roundabout-${this.uniqueId}-page-${this.loadQueue[0]}`).style.backgroundSize="cover",document.querySelector(`.roundabout-${this.uniqueId}-page-${this.loadQueue[0]}`).style.backgroundPosition="center center",this.pages[this.loadQueue[0]].isLoaded=!0,this.loadQueue=this.loadQueue.splice(1,this.loadQueue.length-1),this.load(this.loadQueue,!0)}),t.src=this.pages[this.loadQueue[0]].backgroundImage}}else this.loadingPages=!1}positionPages(){for(let t=0;t<this.positions.length;t++)"0px"==this.positions[t]?(document.querySelector(`.roundabout-${this.uniqueId}-page-${t}`).classList.add("roundabout-hidden-page"),document.querySelector(`.roundabout-${this.uniqueId}-page-${t}`).style.left=this.positions[t]):(document.querySelector(`.roundabout-${this.uniqueId}-page-${t}`).style.left=this.positions[t],document.querySelector(`.roundabout-${this.uniqueId}-page-${t}`).classList.remove("roundabout-hidden-page"),!this.infinite&&0==t&&this.onPage>1&&!this.showWrappedPage&&document.querySelector(`.roundabout-${this.uniqueId}-page-${t}`).classList.add("roundabout-hidden-page"),this.infinite||t!=this.positions.length-1||0!=this.onPage||this.showWrappedPage||document.querySelector(`.roundabout-${this.uniqueId}-page-${this.positions.length-1}`).classList.add("roundabout-hidden-page"))}positionWrap(t=!0,e=0){let i=document.querySelector(`.roundabout-${this.uniqueId}-page-wrap`);t&&(i.classList.remove(`roundabout-${this.uniqueId}-has-transition`),i.classList.add("roundabout-has-no-transition")),i.style.left=this.calcPagePos(e);i.offsetWidth;t&&(i.classList.add(`roundabout-${this.uniqueId}-has-transition`),i.classList.remove("roundabout-has-no-transition"))}findOffset(t,e,i){return"p"==i?e<t?t-e:t+this.pages.length-e:"n"==i?e<t?this.pages.length-t+e:e-t:void 0}calcPagePos(t){if(0==t)return"0px";let e,i;t+=1,"evenly"==this.spacingMode?(e=1,i=0):(e=-1,i=-1);let s="calc((((100% - "+(this.pagesToShow+e)*this.pageSpacing+this.pageSpacingUnits+") / "+this.pagesToShow+") * "+(t-1)+") + "+(this.pageSpacing*(t+i)+this.pageSpacingUnits)+")";return s}displayError(t,e="Error:"){let i=document.createElement("DIV");i.classList.add("roundabout-error-message");let s=document.createElement("SPAN");s.innerHTML=e,s.style.color="red",s.style.fontWeight="bold",i.appendChild(s);let o=document.createElement("SPAN");o.innerHTML=t;let n=document.createElement("BR");i.appendChild(n),i.appendChild(o),document.querySelector(this.parent).appendChild(i),console.error(t)}}