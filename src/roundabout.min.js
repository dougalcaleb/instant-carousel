let roundabout={on:-1,usedIds:[]};class Roundabout{constructor(settings){this.pages=settings.pages?settings.pages:{},this.id=settings.id?settings.id:".myCarousel",this.type=settings.type?settings.type:"normal",this.infinite=!1!==settings.infinite||settings.infinite,this.parent=settings.parent?settings.parent:"body",this.autoGenCSS=!1!==settings.autoGenCSS||settings.autoGenCSS,this.navigation=!1!==settings.navigation||settings.navigation,this.navigationBehavior=settings.navigationBehavior&&this.infinite?settings.navigationBehavior:"nearest",this.autoscroll=!!settings.autoscroll&&settings.autoscroll,this.autoscrollSpeed=settings.autoscrollSpeed>=0?settings.autoscrollSpeed:5e3,this.autoscrollTimeout=settings.autoscrollTimeout>=0?settings.autoscrollTimeout:15e3,this.autoscrollPauseOnHover=!!settings.autoscrollPauseOnHover&&settings.autoscrollPauseOnHover,this.autoscrollStartAfter=settings.autoscrollStartAfter>=0?settings.autoscrollStartAfter:5e3,this.autoscrollDirection=settings.autoscrollDirection?settings.autoscrollDirection:"right",this.transition=settings.transition>=0?settings.transition:300,this.transitionFunction=settings.transitionFunction?settings.transitionFunction:"ease",this.throttle=!1!==settings.throttle||settings.throttle,this.throttleTimeout=settings.throttleTimeout>=0?settings.throttleTimeout:300,this.throttleMatchTransition=!settings.throttleMatchTransition||settings.throttleMatchTransition,this.throttleKeys=!1!==settings.throttleKeys||settings.throttleKeys,this.throttleSwipe=!1!==settings.throttleSwipe||settings.throttleSwipe,this.throttleButtons=!1!==settings.throttleButtons||settings.throttleButtons,this.throttleNavigation=!1!==settings.throttleNavigation||settings.throttleNavigation,this.keys=!1!==settings.keys||settings.keys,this.swipe=!1!==settings.swipe||settings.swipe,this.swipeThreshold=settings.swipeThreshold>=0?settings.swipeThreshold:300,this.swipeMultiplier=settings.swipeMultiplier?settings.swipeMultiplier:1,this.swipeResistance=settings.swipeResistance>=0?settings.swipeResistance:.95,this.pagesToShow=settings.pagesToShow?settings.pagesToShow:1,this.enlargeCenter=settings.enlargeCenter?settings.enlargeCenter:100,this.sizeFalloff=settings.sizeFalloff?settings.sizeFalloff:0,this.pageSpacing=settings.pageSpacing?settings.pageSpacing:0,this.pageSpacingUnits=settings.pageSpacingUnits?settings.pageSpacingUnits:"px",this.spacingMode=settings.spacingMode?settings.spacingMode:"fill",this.scrollBy=settings.scrollBy?settings.scrollBy:1,this.showWrappedPage=!!settings.showWrappedPage&&settings.showWrappedPage,this.mobile=settings.mobile?settings.mobile:{swipeThreshold:50},this.mobileBreakpoint=settings.mobileBreakpoint?settings.mobileBreakpoint:700,this.visualPreset=settings.visualPreset?settings.visualPreset:0,this.orderedPages=[],this.positions=[],this.orderedPagesMainIndex=0,this.scrollIsAllowed=!0,this.onPage=0,this.uniqueId=roundabout.on+1,this.allowInternalStyles=!0,this.allowInternalHTML=!0,this.sx=0,this.sy=0,this.ex=0,this.ey=0,this.dx=0,this.x=0,this.y=0,this.lastMove=null,this.t=!1,this.dragging=!1,this.canSnap=!1,this.swipeFrom=0,this.swipeIsAllowed=!0,this.scrollTimeoutHolder=null,this.scrollIntervalHolder=null,this.boundFollow=null,this.boundEnd=null,this.boundCancel=null,this.initialActions(),this.replaceWithMobile(),this.setListeners(),this.debug_output()}scrollNext(distance,valuesOnly=!1){if(!(this.onPage>=this.pages.length-this.pagesToShow)||this.infinite||"normal"!=this.type)if(distance>this.pages.length-this.pagesToShow-this.onPage&&!this.infinite){let remainingDistance=this.pages.length-this.pagesToShow-this.onPage;this.scrollNext(remainingDistance,valuesOnly)}else{let wrapper=document.querySelector(`.roundabout-${this.uniqueId}-page-wrap`);for(let a=0;a<this.positions.length;a++){let beforeMove=this.calcPagePos(a);"0px"!=beforeMove&&document.querySelector(`.roundabout-${this.uniqueId}-page-${this.orderedPages[a]}`).classList.remove("roundabout-hidden-page"),document.querySelector(`.roundabout-${this.uniqueId}-page-${this.orderedPages[a]}`).style.left=beforeMove}valuesOnly||(wrapper.style.left=this.calcPagePos(-1*distance));for(let a=0;a<distance;a++)this.positions.unshift(this.positions.pop()),this.orderedPages.push(this.orderedPages.shift());this.onPage+=distance,this.onPage>=this.pages.length&&(this.onPage-=this.pages.length),this.navigation&&(document.querySelector(`.roundabout-${this.uniqueId}-active-nav-btn`).classList.remove(`roundabout-${this.uniqueId}-active-nav-btn`),document.querySelector(`.roundabout-${this.uniqueId}-nav-btn-${this.onPage}`).classList.add(`roundabout-${this.uniqueId}-active-nav-btn`)),valuesOnly?(this.positionWrap(!valuesOnly),this.positionPages()):setTimeout(()=>{this.positionWrap(!valuesOnly),this.positionPages()},this.transition),this.navigation&&(document.querySelector(`.roundabout-${this.uniqueId}-active-nav-btn`).classList.remove(`roundabout-${this.uniqueId}-active-nav-btn`),document.querySelector(`.roundabout-${this.uniqueId}-nav-btn-${this.onPage}`).classList.add(`roundabout-${this.uniqueId}-active-nav-btn`))}}scrollPrevious(distance,valuesOnly=!1){if(!(this.onPage<=0)||this.infinite||"normal"!=this.type)if(Math.abs(distance)>this.onPage&&!this.infinite){let remainingDistance=-1*this.onPage;this.scrollPrevious(remainingDistance,valuesOnly)}else{let wrapper=document.querySelector(`.roundabout-${this.uniqueId}-page-wrap`),pos=[];for(let a=0;a<this.positions.length;a++)pos.push(a-Math.abs(distance));for(let a=0;a<Math.abs(distance);a++)pos.push(pos.shift());for(let a=0;a<this.positions.length;a++){let beforeMove=this.calcPagePos(pos[a]);"0px"!=beforeMove&&document.querySelector(`.roundabout-${this.uniqueId}-page-${this.orderedPages[a]}`).classList.remove("roundabout-hidden-page"),document.querySelector(`.roundabout-${this.uniqueId}-page-${this.orderedPages[a]}`).style.left=beforeMove}valuesOnly||(wrapper.style.left=this.calcPagePos(-1*distance));for(let a=0;a<Math.abs(distance);a++)this.positions.push(this.positions.shift()),this.orderedPages.unshift(this.orderedPages.pop());this.onPage+=distance,this.onPage<0&&(this.onPage+=this.pages.length),valuesOnly?(this.positionWrap(!valuesOnly),this.positionPages()):setTimeout(()=>{this.positionWrap(!valuesOnly),this.positionPages()},this.transition),this.navigation&&(document.querySelector(`.roundabout-${this.uniqueId}-active-nav-btn`).classList.remove(`roundabout-${this.uniqueId}-active-nav-btn`),document.querySelector(`.roundabout-${this.uniqueId}-nav-btn-${this.onPage}`).classList.add(`roundabout-${this.uniqueId}-active-nav-btn`))}}scrollTo(page){this.infinite&&"direction"!=this.navigationBehavior?this.findOffset(this.onPage,page,"p")<this.findOffset(this.onPage,page,"n")?this.throttleNavigation?this.previousHandler(this,"scrollto",-1*this.findOffset(this.onPage,page,"p")):this.scrollPrevious(-1*this.findOffset(this.onPage,page,"p")):this.throttleNavigation?this.nextHandler(this,"scrollto",this.findOffset(this.onPage,page,"n")):this.scrollNext(this.findOffset(this.onPage,page,"n")):page<this.onPage?this.throttleNavigation?this.previousHandler(this,"scrollto",page-this.onPage):this.scrollPrevious(page-this.onPage):this.throttleNavigation?this.nextHandler(this,"scrollto",page-this.onPage):this.scrollNext(page-this.onPage)}nextHandler(parent,from,distance){let sd;sd="snap"==from?1:"scrollto"==from?distance:parent.scrollBy;let sb="snap"!=from;parent.resetScrollTimeout(),parent.scrollIsAllowed&&!parent.dragging&&(parent.scrollNext(sd,!1,sb),(parent.throttle&&parent.throttleButtons&&"key"!=from||parent.throttle&&parent.throttleKeys&&"key"==from)&&(parent.scrollIsAllowed=!1,setTimeout(()=>{parent.scrollIsAllowed=!0},parent.throttleTimeout)))}previousHandler(parent,from,distance){let sd;sd="snap"==from?-1:"scrollto"==from?distance:-parent.scrollBy;let sb="snap"!=from;parent.resetScrollTimeout(),parent.scrollIsAllowed&&!parent.dragging&&(parent.scrollPrevious(sd,!1,sb),(parent.throttle&&parent.throttleButtons&&"key"!=from||parent.throttle&&parent.throttleKeys&&"key"==from)&&(parent.scrollIsAllowed=!1,setTimeout(()=>{parent.scrollIsAllowed=!0},parent.throttleTimeout)))}resetScrollTimeout(){clearTimeout(this.scrollTimeoutHolder),clearInterval(this.scrollIntervalHolder),this.scrollTimeoutHolder=setTimeout(()=>{this.setAutoScroll(this)},this.autoscrollTimeout)}setAutoScroll(parent,firstTime=!1){firstTime&&parent.autoscroll?setTimeout(()=>{parent.scrollAuto(parent),parent.scrollIntervalHolder=setInterval(()=>{parent.scrollAuto(parent)},parent.autoscrollSpeed)},parent.autoscrollStartAfter):parent.autoscroll&&(parent.scrollIntervalHolder=setInterval(()=>{parent.scrollAuto(parent)},parent.autoscrollSpeed))}scrollAuto(parent){"left"==parent.autoscrollDirection.toLowerCase()&&parent.scrollIsAllowed?parent.scrollPrevious(this.scrollBy):"right"==parent.autoscrollDirection.toLowerCase()&&parent.scrollIsAllowed&&parent.scrollNext(this.scrollBy)}setTouch(event,parent){event.preventDefault(),parent.t=!0,parent.tStart(event,parent)}tStart(event,parent){if(parent.resetScrollTimeout(),parent.throttleSwipe){if(!parent.swipeIsAllowed)return;parent.throttle&&(parent.swipeIsAllowed=!1)}event.preventDefault(),parent.dragging=!0,parent.swipeFrom=parent.orderedPages[parent.orderedPagesMainIndex],document.querySelector(`.roundabout-${parent.uniqueId}-page-wrap`).classList.remove(`roundabout-${this.uniqueId}-has-transition`),document.querySelector(`.roundabout-${parent.uniqueId}-page-wrap`).classList.add("roundabout-has-no-transition"),parent.lastMove=event.touches,parent.t?(parent.x=event.touches[0].clientX,parent.y=event.touches[0].clientY,parent.sx=event.touches[0].clientX,parent.sy=event.touches[0].clientY):(parent.x=event.clientX,parent.y=event.clientY,parent.sx=event.clientX,parent.sy=event.clientY),document.addEventListener("mousemove",parent.boundFollow,!1),document.addEventListener("mouseup",parent.boundEnd,!1),parent.t&&(document.addEventListener("touchmove",parent.boundFollow,!1),document.addEventListener("touchend",parent.boundEnd,!1),document.addEventListener("touchcancel",parent.boundCancel,!1))}follow(event,parent){if(parent.dragging){parent.t?(parent.x=event.changedTouches[0].clientX,parent.y=event.changedTouches[0].clientY):(parent.x=event.clientX,parent.y=event.clientY),parent.dx=(parent.x-parent.sx)*parent.swipeMultiplier,Math.abs(parent.dx)<document.querySelector(parent.parent).offsetWidth&&parent.infinite?parent.dx=(parent.x-parent.sx)*parent.swipeMultiplier:parent.dx<0?parent.infinite?parent.dx-=(parent.dx+document.querySelector(parent.parent).offsetWidth)*parent.swipeResistance:parent.pages.length-parent.pagesToShow==parent.onPage&&(1==parent.swipeResistance?parent.dx=0:parent.dx-=parent.dx*parent.swipeResistance):parent.dx>0&&(parent.infinite?parent.dx-=(parent.dx-document.querySelector(parent.parent).offsetWidth)*parent.swipeResistance:0===parent.orderedPages[parent.orderedPagesMainIndex]&&(1==parent.swipeResistance?parent.dx=0:parent.dx-=parent.dx*parent.swipeResistance));let dist=Math.abs(parent.dx);dist>=parent.swipeThreshold&&parent.infinite||dist>=parent.swipeThreshold&&!parent.infinite&&parent.onPage>=0&&parent.onPage<parent.pages.length-parent.pagesToShow?parent.canSnap=!0:parent.canSnap=!1;let totalSize=document.querySelector(`.roundabout-${parent.uniqueId}-page-`+parent.orderedPages[parent.orderedPagesMainIndex]).offsetWidth+parent.pageSpacing;dist>=totalSize&&parent.infinite||dist>=totalSize&&!parent.infinite&&parent.onPage<=parent.pages.length-parent.pagesToShow&&parent.onPage>=0?(parent.dx>0?parent.scrollPrevious(-1,!0):parent.dx<0&&parent.scrollNext(1,!0),parent.sx=parent.x/1,parent.dx=0):document.querySelector(`.roundabout-${parent.uniqueId}-page-wrap`).style.left=parent.dx+"px"}}tEnd(event,parent){setTimeout(()=>{parent.swipeIsAllowed=!0},parent.throttleTimeout),document.querySelector(`.roundabout-${parent.uniqueId}-page-wrap`).classList.add(`roundabout-${this.uniqueId}-has-transition`),document.querySelector(`.roundabout-${parent.uniqueId}-page-wrap`).classList.remove("roundabout-has-no-transition"),parent.dragging=!1,parent.t?(parent.ex=event.changedTouches[0].clientX,parent.ey=event.changedTouches[0].clientY):(parent.ex=event.clientX,parent.ey=event.clientY),parent.snap(parent.canSnap,parent.dx,parent),parent.resetSwipeVars(parent),document.removeEventListener("mousemove",parent.boundFollow,!1),document.removeEventListener("mouseup",parent.boundEnd,!1),document.removeEventListener("touchmove",parent.boundFollow,!1),document.removeEventListener("touchend",parent.boundEnd,!1),document.removeEventListener("touchcancel",parent.boundCancel,!1)}tCancel(event,parent){event.preventDefault(),document.removeEventListener("mouseup",event=>{parent.tEnd(event,parent)},!1),document.removeEventListener("touchend",event=>{parent.tEnd(event,parent)},!1),document.removeEventListener("touchcancel",event=>{parent.tCancel(event,parent)},!1)}snap(al,dir,parent){al?dir>0?(parent.previousHandler(parent,"snap"),parent.positionWrap(!1,1)):dir<0&&(parent.nextHandler(parent,"snap"),parent.positionWrap(!1,-1)):parent.positionWrap(!1,0)}resetSwipeVars(parent){parent.sx=0,parent.sy=0,parent.ex=0,parent.ey=0,parent.x=0,parent.y=0,parent.dx=0,parent.lastMove=[],parent.t=!1,parent.canSnap=!1}execMM(event){this.follow(event,this)}execMU(event){this.tEnd(event,this)}execTC(event){this.tCancel(event,this)}defaultHTML(){let newCarousel=document.createElement("DIV"),html=`<div class="roundabout-${this.uniqueId}-swipe-overlay roundabout-swipe-overlay"></div><div class="roundabout-${this.uniqueId}-page-wrap roundabout-page-wrap roundabout-${this.uniqueId}-has-transition"></div><div class="roundabout-${this.uniqueId}-nav roundabout-nav"><div class="roundabout-${this.uniqueId}-btn-r roundabout-btn-r roundabout-scroll-btn"><svg viewBox="0 0 24 24"><path fill="currentColor" d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg></div><div class="roundabout-${this.uniqueId}-btn-l roundabout-btn-l roundabout-scroll-btn"><svg viewBox="0 0 24 24"><path fill="currentColor" d="M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z" /></svg></div></div>`;if(newCarousel.innerHTML=html,newCarousel.classList.add("roundabout-wrapper"),"#"==this.id.split("")[0]){let newId=this.id.split("");newId.shift(),newId=newId.join(""),newCarousel.setAttribute("id",newId)}else{let newClass=this.id.split("");newClass.shift(),newClass=newClass.join(""),newCarousel.classList.add(newClass)}document.querySelector(this.parent).appendChild(newCarousel)}defaultCSS(){let css,requiredCss=".roundabout-page{position:absolute}.roundabout-page-wrap{width:100%;height:100%;position:absolute;left:0}.roundabout-wrapper{position:relative}";switch(this.visualPreset){case 0:css=`.roundabout-wrapper{height:80vh;overflow:hidden}.roundabout-scroll-btn svg{position:absolute;left:0;right:0;top:0;bottom:0;margin:auto;height:70px}.roundabout-nav-wrap{position:absolute;left:0;right:0;margin:auto;display:flex;justify-content:space-evenly;bottom:0;height:40px;width:25%}.roundabout-scroll-btn{position:absolute;top:0;bottom:0;margin:auto;height:80px;width:80px;cursor:pointer;color:#fff}.roundabout-nav{height:100%;width:100%}.roundabout-btn-l{left:0}.roundabout-btn-r{right:0}.roundabout-swipe-overlay{width:calc(100% - 140px);height:calc(100% - 40px);top:0;left:0;right:0;position:absolute;margin:auto;z-index:2}.roundabout-${this.uniqueId}-nav-btn{margin:auto;height:10px;width:10px;border-radius:100%;border:2px solid #fff;transition:.2s;cursor:pointer}.roundabout-${this.uniqueId}-inactive-nav-btn{background:0 0}.roundabout-${this.uniqueId}-active-nav-btn{background:#fff}`}let newStyle=document.createElement("STYLE");newStyle.setAttribute("type","text/css"),newStyle.innerHTML=css,document.getElementsByTagName("head")[0].appendChild(newStyle);let newReqStyle=document.createElement("STYLE");newReqStyle.setAttribute("type","text/css"),newReqStyle.innerHTML=requiredCss,document.getElementsByTagName("head")[0].appendChild(newReqStyle)}internalCSS(){let css=`.roundabout-${this.uniqueId}-has-transition {transition:${this.transition/1e3}s; transition-timing-function:${this.transitionFunction}} .roundabout-has-no-transition{\ntransition:none;} .roundabout-hidden-page {\nvisibility: hidden}.roundabout-error-message {\nposition:relative;\nmargin:auto;\nleft:0;\nright:0;\ntop:0;\nbottom:0;\nborder-radius:5px;\nborder:3px solid black;\nbackground: white;\ntext-align:center;\nfont-family:sans-serif;\nwidth:30%;}`,newStyle=document.createElement("STYLE");newStyle.setAttribute("type","text/css"),newStyle.innerHTML=css,document.getElementsByTagName("head")[0].appendChild(newStyle)}generatePages(){let baseHeight=100,pagesCss="";for(let a=0;a<this.pages.length;a++){let newPage=document.createElement("DIV"),newPos;if(newPage.classList.add(`roundabout-${this.uniqueId}-page-${a}`,"roundabout-page"),"normal"==this.type){let iteratorMod,iteratorMod2;"evenly"==this.spacingMode?(iteratorMod=1,iteratorMod2=0):(iteratorMod=-1,iteratorMod2=-1);let pageWidth="calc((100% - "+(this.pagesToShow+iteratorMod)*this.pageSpacing+this.pageSpacingUnits+") / "+this.pagesToShow+")";newPage.style.width=pageWidth,a<=this.pagesToShow+2&&(newPos="calc((((100% - "+(this.pagesToShow+iteratorMod)*this.pageSpacing+this.pageSpacingUnits+") / "+this.pagesToShow+") * "+(a-1)+") + "+(this.pageSpacing*(a+iteratorMod2)+this.pageSpacingUnits)+")")}else newPage.style.width="100%";newPage.style.height="100%",this.pages[a].backgroundImage&&(newPage.style.background="url("+this.pages[a].backgroundImage+")",newPage.style.backgroundSize="cover",newPage.style.backgroundPosition="center center"),this.pages[a].html&&(newPage.innerHTML=this.pages[a].html,this.pages[a].css&&(pagesCss+=this.pages[a].css)),document.querySelector(`.roundabout-${this.uniqueId}-page-wrap`).appendChild(newPage),this.orderedPages.push(a),a<=this.pagesToShow+1?this.positions.push(newPos):this.positions.push("0px")}let newPagesStyle=document.createElement("STYLE");if(newPagesStyle.setAttribute("type","text/css"),newPagesStyle.innerHTML=pagesCss,document.getElementsByTagName("head")[0].appendChild(newPagesStyle),this.navigation){let navbar=document.createElement("div"),numButtons;navbar.classList.add(`roundabout-${this.uniqueId}-nav-wrap`,"roundabout-nav-wrap"),document.querySelector(`.roundabout-${this.uniqueId}-nav`).appendChild(navbar),"normal"==this.type&&(numButtons=this.infinite?this.pages.length:this.pages.length-(this.pagesToShow-1));for(let a=0;a<numButtons;a++){let newNavBtn=document.createElement("div");0==a?newNavBtn.classList.add(`roundabout-${this.uniqueId}-active-nav-btn`):newNavBtn.classList.add(`roundabout-${this.uniqueId}-inactive-nav-btn`),newNavBtn.classList.add(`roundabout-${this.uniqueId}-nav-btn`,`roundabout-${this.uniqueId}-nav-btn-${a}`),navbar.appendChild(newNavBtn),newNavBtn.addEventListener("click",()=>{this.scrollTo(a)})}}this.positions.push(this.positions.shift()),this.positionPages()}replaceWithMobile(){let mobileL=0;for(let key in this.mobile)this.mobile.hasOwnProperty(key)&&mobileL++;let settingsL=0;for(let key in this)this.hasOwnProperty(key)&&settingsL++;if(screen.width<=this.mobileBreakpoint){let c=Object.entries(this),cm=Object.entries(this.mobile);for(let a=0;a<mobileL;a++)for(let b=0;b<settingsL;b++)c[b][0]==cm[a][0]&&(this[c[b][0].toString()]=cm[a][1])}}initialActions(){this.allowInternalStyles&&this.internalCSS(),this.checkForErrors()&&(roundabout.on++,this.allowInternalHTML&&this.defaultHTML(),this.autoGenCSS&&this.allowInternalStyles&&this.defaultCSS(),this.throttleMatchTransition&&(this.throttleTimeout=this.transition),this.autoscroll&&this.setAutoScroll(this,!0),this.generatePages(),this.boundFollow=this.execMM.bind(this),this.boundEnd=this.execMU.bind(this),this.boundCancel=this.execTC.bind(this),"normal"==this.type&&(this.swipeThreshold/=this.pagesToShow))}setListeners(){document.querySelector(`.roundabout-${this.uniqueId}-btn-r`).addEventListener("click",()=>{this.nextHandler(this)}),document.querySelector(`.roundabout-${this.uniqueId}-btn-l`).addEventListener("click",()=>{this.previousHandler(this)}),this.keys&&document.addEventListener("keydown",event=>{switch(event.key){case"ArrowLeft":this.previousHandler(this,"key");break;case"ArrowRight":this.nextHandler(this,"key")}}),this.autoscrollPauseOnHover&&(document.querySelector(this.parent).addEventListener("mouseover",()=>{this.scrollIsAllowed=!1}),document.querySelector(this.parent).addEventListener("mouseout",()=>{this.scrollIsAllowed=!0,this.resetScrollTimeout()})),this.swipe&&(document.querySelector(`.roundabout-${this.uniqueId}-swipe-overlay`).addEventListener("mousedown",event=>{this.tStart(event,this)},!1),document.querySelector(`.roundabout-${this.uniqueId}-swipe-overlay`).addEventListener("touchstart",event=>{this.setTouch(event,this)},!1))}checkForErrors(){return this.pages.length-this.pagesToShow<=1?(this.displayError("For the number of pages supplied, there are too many being shown. There must be at least 2 fewer pages shown than the number of pages. Minimum required pages is 3."),!1):(0!=this.pages.length&&this.pages.length||this.displayError("No pages have been supplied. Please create a 'pages' array containing your pages. See the documentation for details."),"#"!==this.id.split("")[0]&&"."!==this.id.split("")[0]?(this.displayError("An invalid selector prefix was given for the parent. Valid selector prefixes are '#' for IDs or '.' for classes."),!1):roundabout.usedIds.includes(this.id)?(this.displayError(`The selector ${this.id} is already in use by another carousel. Please use a unique selector.`),!1):(roundabout.usedIds.push(this.id),!(this.pagesToShow<this.scrollBy)||(this.displayError("'scrollBy' must be less than or equal to 'pagesToShow'."),!1)))}positionPages(){for(let a=0;a<this.positions.length;a++)"0px"==this.positions[a]?(document.querySelector(`.roundabout-${this.uniqueId}-page-${a}`).classList.add("roundabout-hidden-page"),document.querySelector(`.roundabout-${this.uniqueId}-page-${a}`).style.left=this.positions[a]):(document.querySelector(`.roundabout-${this.uniqueId}-page-${a}`).style.left=this.positions[a],document.querySelector(`.roundabout-${this.uniqueId}-page-${a}`).classList.remove("roundabout-hidden-page"),!this.infinite&&0==a&&this.onPage>1&&!this.showWrappedPage&&document.querySelector(`.roundabout-${this.uniqueId}-page-${a}`).classList.add("roundabout-hidden-page"),this.infinite||a!=this.positions.length-1||0!=this.onPage||this.showWrappedPage||document.querySelector(`.roundabout-${this.uniqueId}-page-${this.positions.length-1}`).classList.add("roundabout-hidden-page"))}positionWrap(setTransitions=!0,position=0){let wrapper=document.querySelector(`.roundabout-${this.uniqueId}-page-wrap`);setTransitions&&(wrapper.classList.remove(`roundabout-${this.uniqueId}-has-transition`),wrapper.classList.add("roundabout-has-no-transition")),wrapper.style.left=this.calcPagePos(position);const flushCssBuffer=wrapper.offsetWidth;setTransitions&&(wrapper.classList.add(`roundabout-${this.uniqueId}-has-transition`),wrapper.classList.remove("roundabout-has-no-transition"))}findOffset(start,end,direction){return"p"==direction?end<start?start-end:start+this.pages.length-end:"n"==direction?end<start?this.pages.length-start+end:end-start:void 0}calcPagePos(pagePos){if(0==pagePos)return"0px";let iteratorMod,iteratorMod2,newPos;return pagePos+=1,"evenly"==this.spacingMode?(iteratorMod=1,iteratorMod2=0):(iteratorMod=-1,iteratorMod2=-1),"calc((((100% - "+(this.pagesToShow+iteratorMod)*this.pageSpacing+this.pageSpacingUnits+") / "+this.pagesToShow+") * "+(pagePos-1)+") + "+(this.pageSpacing*(pagePos+iteratorMod2)+this.pageSpacingUnits)+")"}displayError(message,title="Error:"){let em=document.createElement("DIV");em.classList.add("roundabout-error-message");let t=document.createElement("SPAN");t.innerHTML=title,t.style.color="red",t.style.fontWeight="bold",em.appendChild(t);let m=document.createElement("SPAN");m.innerHTML=message;let lb=document.createElement("BR");em.appendChild(lb),em.appendChild(m),document.querySelector(this.parent).appendChild(em),console.error(message)}debug_output(){}}