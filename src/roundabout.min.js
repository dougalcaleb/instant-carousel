const roundabout={on:-1,usedIds:[],logged:!1,defaults:{pages:[],breakpoints:[],listenForResize:!1,interpolate:[],precomputeInterpolation:null,template:null,id:".myCarousel",parent:"body",lazyLoad:"none",loadTimeout:5e3,uiEnabled:!0,rotation:"none",type:"slider",infinite:!0,keys:!0,buttons:!0,swipe:!0,swipeThreshold:300,swipeMultiplier:1,swipeResistance:.95,swipeSnap:!0,swipeSpeedThreshold:1200,scrollwheel:!1,pagesToShow:1,pageSpacing:0,pageSpacingUnits:"px",pageSpacingMode:"fill",scrollBy:1,showWrappedPage:!1,transition:300,transitionFunction:"ease",navigation:!0,navigationTrim:!0,navigationBehavior:"nearest",autoscroll:!1,autoscrollSpeed:5e3,autoscrollTimeout:15e3,autoscrollPauseOnHover:!1,autoscrollStartAfter:5e3,autoscrollDirection:"right",throttle:!0,throttleTimeout:300,throttleKeys:!0,throttleSwipe:!0,throttleButtons:!0,throttleNavigation:!0,nextHTML:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>',prevHTML:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z" /></svg>',initOnly:!1,ignoreErrors:!1}};export default class Roundabout{constructor(t=roundabout.defaults){let e=Object.entries(t),s=Object.entries(roundabout.defaults);this.VERSION="1.5.0",roundabout.logged,roundabout.logged=!0;for(let t=0;t<s.length;t++){let i=!1;for(let o=0;o<e.length;o++){if(!roundabout.defaults.hasOwnProperty(e[o][0]))throw`Error: Invalid Roundabout setting: "${e[o][0]}"`;if(e[o][0].toString()==s[t][0].toString()){this[e[o][0].toString()]=e[o][1],i=!0;break}}!i&&roundabout.defaults.hasOwnProperty(s[t][0])&&(this[s[t][0].toString()]=s[t][1])}if(this._orderedPages=[],this._positions=[],this._orderedPagesMainIndex=0,this._scrollIsAllowed=!0,this.onPage=0,this._handledLoad=!1,this._loadQueue=[],this._loadTimeout=null,this._loadingPages=!1,this._uniqueId=roundabout.on+1,this._overriddenValues=[],this._currentBp=-2,this._atEnd=!0,this.activeBreakpoint=null,this._calculatedPageSize=null,this._htmlTemplates=[],this._templateRootSelectors={},this._interParsed=!1,this._interpolateCache={},this._abort={all:new AbortController,swipe:new AbortController},this._allowInternalStyles=!0,this._allowInternalHTML=!0,this._sx=0,this._ex=0,this._dx=0,this._x=0,this._lastDx=0,this._lastMove=null,this._t=!1,this._dragging=!1,this._canSnap=!1,this._swipeFrom=0,this._swipeIsAllowed=!0,this._sts=0,this._ste=0,this._distPercent=0,this._isAutoscrolling=!1,this._autoscrollPaused=!1,this._scrollTimeoutHolder=null,this._scrollIntervalHolder=null,this._scrollAfterTimeoutHolder=null,this._boundFollow=null,this._boundEnd=null,this._boundCancel=null,this._callbacks={scroll:[],scrollEnd:[],dragStart:[],dragEnd:[],scrollNext:[],scrollPrevious:[],scrollNextEnd:[],scrollPreviousEnd:[],load:[],beforeDestroy:[],afterDestroy:[]},!this.initOnly&&this.initialActions()){try{this.setListeners()}catch(t){}try{this.setBreakpoints()}catch(t){}}}scroll(t,e,s=0){if(t>0&&this.onPage>=this.pages.length-this.pagesToShow&&!this.infinite||t<0&&this.onPage<=0&&!this.infinite||0==t)this.infinite||this.navigationTrim||1!=t||this.setActiveBtn(this.onPage+1);else if(t>0&&t>this.pages.length-this.pagesToShow-this.onPage&&!this.infinite){let s=this.pages.length-this.pagesToShow-this.onPage;this.scroll(s,e,t-s)}else if(t<0&&Math.abs(t)>this.onPage&&!this.infinite){let t=-1*this.onPage;this.scroll(t,e)}else{let i=document.querySelector(`.roundabout-${this._uniqueId}-page-wrap`);this._callbacks.scroll.forEach((e=>{e(t)}));let o=[];if(t>0){if("slider"==this.type){for(let t=0;t<this._positions.length;t++)o.push(t-(this.pages.length>2?1:0));this.pages.length>2&&o.push(o.shift()),this.infinite||this.onPage+t+this.pagesToShow!=this.pages.length||(o[o.length-1]=o.length-1)}else if("gallery"==this.type)for(let e=0;e<this._positions.length;e++)e<this.pagesToShow||e>=t&&e<t+this.pagesToShow?o.push(e%this.pagesToShow):o.push(-1);this._callbacks.scrollNext.forEach((e=>{e(t)}))}else if(t<0){if("slider"==this.type){for(let e=0;e<this._positions.length;e++)o.push(e-Math.abs(t));for(let e=0;e<Math.abs(t);e++)o.push(o.shift())}else if("gallery"==this.type)for(let e=0;e<this._positions.length;e++)e<this.pagesToShow||e>=this._positions.length+t&&e<this._positions.length+t+this.pagesToShow?o.push(e%this.pagesToShow):o.push(-1);this._callbacks.scrollPrevious.forEach((e=>{e(t)}))}for(let e=0;e<this._positions.length;e++){let s="slider"==this.type?this.calcPagePos(o[e],{raw:!0}):this.calcPagePos(o[e],{direction:t});"0px"!=s&&document.querySelector(`.roundabout-${this._uniqueId}-page-${this._orderedPages[e]}`).classList.remove(`roundabout-${this._uniqueId}-hidden-page`),"gallery"==this.type&&(e<this.pagesToShow?document.querySelector(`.roundabout-${this._uniqueId}-page-${this._orderedPages[e]}`).classList.add("roundabout-fadeout"):document.querySelector(`.roundabout-${this._uniqueId}-page-${this._orderedPages[e]}`).classList.remove("roundabout-fadeout")),document.querySelector(`.roundabout-${this._uniqueId}-page-${this._orderedPages[e]}`).style.left=s}this.navigationTrim&&(s=0),e||"slider"!=this.type||(i.style.left=this.calcPagePos(-t,{wrap:!0}));for(let e=0;e<Math.abs(t);e++)t>0?(this._positions.unshift(this._positions.pop()),this._orderedPages.push(this._orderedPages.shift())):t<0&&(this._positions.push(this._positions.shift()),this._orderedPages.unshift(this._orderedPages.pop()));for(let t=0;t<this.pagesToShow;t++)document.querySelector(`.roundabout-${this._uniqueId}-visible-page-${t}`).classList.remove(`roundabout-${this._uniqueId}-visible-page-${t}`),document.querySelector(`.roundabout-${this._uniqueId}-page-${this._orderedPages[t]}`).classList.add(`roundabout-${this._uniqueId}-visible-page-${t}`);this.onPage+=t,this._lastDx=0,t>0&&this.onPage>=this.pages.length?this.onPage-=this.pages.length:t<0&&this.onPage<0&&(this.onPage+=this.pages.length),e?(this.positionWrap(!e),this.positionPages()):setTimeout((()=>{"slider"==this.type&&this.positionWrap(!e),this.positionPages(),this._callbacks.scrollEnd.forEach((t=>{t()})),t>0?this._callbacks.scrollNextEnd.forEach((t=>{t()})):t<0&&this._callbacks.scrollPreviousEnd.forEach((t=>{t()}))}),this.transition),this.navigation&&this.setActiveBtn("slider"==this.type?this.onPage+s:Math.floor(this.onPage/this.pagesToShow)%Math.floor(this.pages.length/this.pagesToShow)),"custom"===this.lazyLoad||"hidden"!=this.lazyLoad&&"lazy-hidden"!=this.lazyLoad||Math.abs(t)!=this.scrollBy||(t>0?this.load(this._orderedPages.slice(this.pagesToShow,this.pagesToShow+this.scrollBy)):t<0&&this.load(this._orderedPages.slice(this._orderedPages.length-this.scrollBy,this._orderedPages.length)))}}scrollTo(t,e=!0){this._scrollIsAllowed&&this.throttleNavigation&&this.navigation?this.navigationTrim||"slider"!=this.type?this.setActiveBtn("slider"==this.type?this.onPage:Math.floor(this.onPage/this.pagesToShow)%Math.floor(this.pages.length/this.pagesToShow)):this.setActiveBtn(t):!this.throttleNavigation&&this.navigation&&this.setActiveBtn("slider"==this.type?this.onPage:Math.floor(this.onPage/this.pagesToShow)%Math.floor(this.pages.length/this.pagesToShow)),this.infinite&&"direction"!=this.navigationBehavior?this.findOffset(this.onPage,t,"p")<this.findOffset(this.onPage,t,"n")?this.throttleNavigation?this.scrollHandler(this,"scrollto",-1*this.findOffset(this.onPage,t,"p"),e):this.scroll(-1*this.findOffset(this.onPage,t,"p"),e):this.throttleNavigation?this.scrollHandler(this,"scrollto",this.findOffset(this.onPage,t,"n")):this.scroll(this.findOffset(this.onPage,t,"n"),e):this.throttleNavigation?this.scrollHandler(this,"scrollto",t-this.onPage):this.scroll(t-this.onPage,e),"custom"!==this.lazyLoad&&this.load([...this._orderedPages.slice(0,this.pagesToShow+this.scrollBy),...this._orderedPages.slice(this._orderedPages.length-this.scrollBy)])}setActiveBtn(t){document.querySelector(`.roundabout-${this._uniqueId}-active-nav-btn`).classList.add(`roundabout-${this._uniqueId}-inactive-nav-btn`,"roundabout-inactive-nav-btn"),document.querySelector(`.roundabout-${this._uniqueId}-active-nav-btn`).classList.remove(`roundabout-${this._uniqueId}-active-nav-btn`,"roundabout-active-nav-btn"),document.querySelector(`.roundabout-${this._uniqueId}-nav-btn-${t}`).classList.add(`roundabout-${this._uniqueId}-active-nav-btn`,"roundabout-active-nav-btn"),document.querySelector(`.roundabout-${this._uniqueId}-nav-btn-${t}`).classList.remove(`roundabout-${this._uniqueId}-inactive-nav-btn`,"roundabout-inactive-nav-btn")}scrollHandler(t,e,s,i=!0){let o;"snap"==e?s>0?o=1:s<0&&(o=-1):"scrollto"==e?o=s:s>0?o=t.scrollBy:s<0&&(o=-t.scrollBy),t.resetScrollTimeout(),!t._scrollIsAllowed||t._dragging&&"follow"!=e||(t.scroll(o,!i),(t.throttle&&t.throttleButtons&&"button"==e||t.throttle&&t.throttleKeys&&"key"==e||t.throttle&&t.throttleSwipe&&("follow"==e||"snap"==e||"snap-g"==e)||t.throttle&&t.throttleNavigation&&"scrollto"==e||t.throttle&&"scroll"==e)&&(t._scrollIsAllowed=!1,t._swipeIsAllowed=!1,setTimeout((()=>{t._scrollIsAllowed=!0,t._swipeIsAllowed=!0}),t.throttleTimeout)))}resetScrollTimeout(t=!1){clearTimeout(this._scrollTimeoutHolder),clearInterval(this._scrollIntervalHolder),this._scrollTimeoutHolder=setTimeout((()=>{t&&this.scrollAuto(this),this.setAutoScroll(this)}),this.autoscrollTimeout)}setAutoScroll(t,e=!1){e&&t.autoscroll?t._scrollAfterTimeoutHolder=setTimeout((()=>{t.scrollAuto(t),t._scrollIntervalHolder=setInterval((()=>{t.scrollAuto(t)}),t.autoscrollSpeed)}),t.autoscrollStartAfter):t.autoscroll&&(t._scrollIntervalHolder=setInterval((()=>{t.scrollAuto(t)}),t.autoscrollSpeed))}scrollAuto(t){this._autoscrollPaused||(this._isAutoscrolling=!0,setTimeout((()=>{t._isAutoscrolling=!1,this._scrollIsAllowed=!0}),t.transition),"left"==t.autoscrollDirection.toLowerCase()&&t._scrollIsAllowed?(this._scrollIsAllowed=!1,t.scroll(-this.scrollBy)):"right"==t.autoscrollDirection.toLowerCase()&&t._scrollIsAllowed&&(this._scrollIsAllowed=!1,t.scroll(this.scrollBy)))}setTouch(t,e){!e._isAutoscrolling&&e._swipeIsAllowed&&(t.preventDefault(),e._t=!0,e.tStart(t,e))}tStart(t,e){!e._isAutoscrolling&&e._swipeIsAllowed&&(this._callbacks.dragStart.forEach((e=>{e(t)})),e.resetScrollTimeout(),e.swipeSpeedThreshold>0&&(e._sts=Date.now()),t.preventDefault(),e._dragging=!0,e._swipeFrom=e._orderedPages[e._orderedPagesMainIndex],document.querySelector(`.roundabout-${e._uniqueId}-page-wrap`).classList.remove(`roundabout-${this._uniqueId}-has-transition`),document.querySelector(`.roundabout-${e._uniqueId}-page-wrap`).classList.add("roundabout-has-no-transition"),e._lastMove=t.touches,e._t?("none"==e.rotation?e._sx=t.touches[0].clientX:e._sx=e.rotation*t.touches[0].clientY,"none"==e.rotation?e._x=t.touches[0].clientX:e._x=e.rotation*t.touches[0].clientY):("none"==e.rotation?e._x=t.clientX:e._x=e.rotation*t.clientY,"none"==e.rotation?e._sx=t.clientX:e._sx=e.rotation*t.clientY),document.addEventListener("mousemove",e._boundFollow,!1,{signal:e._abort.swipe.signal}),document.addEventListener("mouseup",e._boundEnd,!1,{signal:e._abort.swipe.signal}),e._t&&(document.addEventListener("touchmove",e._boundFollow,!1,{signal:e._abort.swipe.signal}),document.addEventListener("touchend",e._boundEnd,!1,{signal:e._abort.swipe.signal}),document.addEventListener("touchcancel",e._boundEnd,!1,{signal:e._abort.swipe.signal})))}follow(t,e){if(e._dragging){e._t?"none"==e.rotation?e._x=t.changedTouches[0].clientX:e._x=e.rotation*t.changedTouches[0].clientY:"none"==e.rotation?e._x=t.clientX:e._x=e.rotation*t.clientY,e._dx=(e._x-e._sx)*e.swipeMultiplier,!e.infinite&&(e.onPage==e.pages.length-e.pagesToShow&&e._dx<-1*e._lastDx||0==e.onPage&&e._dx>-1*e._lastDx)?e._atEnd=!0:e._atEnd=!1,Math.abs(e._dx)<document.querySelector(e.parent).offsetWidth&&e.infinite?e._dx=(e._x-e._sx)*e.swipeMultiplier:e._dx<0&&!e.infinite?e.infinite?e._dx-=(e._dx+document.querySelector(e.parent).offsetWidth)*e.swipeResistance:e.pages.length-e.pagesToShow==e.onPage&&(1==e.swipeResistance?e._dx=0:e._atEnd&&(e._dx-=(e._dx+e._lastDx)*e.swipeResistance)):e._dx>0&&!e.infinite&&(e.infinite?e._dx-=(e._dx-document.querySelector(e.parent).offsetWidth)*e.swipeResistance:0===e._orderedPages[e._orderedPagesMainIndex]&&(1==e.swipeResistance?e._dx=0:e._atEnd&&(e._dx-=(e._dx+e._lastDx)*e.swipeResistance))),e._dx+=e._lastDx;let s=Math.abs(e._dx);e.checkCanSnap(e),e._distPercent=s/e._calculatedPageSize,0!=e._distPercent&&e.interpolate.length>0&&(e._distPercent>1&&(e._distPercent=1),e.interpolate.forEach(((t,s)=>{let i;if(this.precomputeInterpolation){let t=~~(Number(e._distPercent.toFixed(this._interpolateCache.decLength))*this._interpolateCache.wholeDecLength),o=(t%this._interpolateCache.whole+t)/this._interpolateCache.wholeDecLength;i=this._interpolateCache.map[s][o]}else i=t.curve?t.curve(e._distPercent):e._distPercent;if(e._dx>0){document.querySelector(`.roundabout-${e._uniqueId}-visible-page-${t.values[0][0]}`).style.transition=t.property+" 0s";let s=(t.values[1][1]-t.values[0][1])*i+t.values[0][1],o=t.unit.replace("$",s);document.querySelector(`.roundabout-${e._uniqueId}-visible-page-${t.values[0][0]}`).style[t.property]=o}else if(e._dx<0){document.querySelector(`.roundabout-${e._uniqueId}-visible-page-${t.values[1][0]}`).style.transition=t.property+" 0s";let s=(t.values[0][1]-t.values[1][1])*i+t.values[1][1],o=t.unit.replace("$",s);document.querySelector(`.roundabout-${e._uniqueId}-visible-page-${t.values[1][0]}`).style[t.property]=o}})));let i=document.querySelector(`.roundabout-${e._uniqueId}-page-`+e._orderedPages[e._orderedPagesMainIndex]).offsetWidth+e.pageSpacing;s>=i&&e.infinite&&"slider"==e.type||s>=i&&!e.infinite&&(e.onPage<e.pages.length-e.pagesToShow||e.onPage==e.pages.length-e.pagesToShow&&e._dx>0)&&(e.onPage>0||0==e.onPage&&e._dx<0)||s>=e.swipeThreshold&&"gallery"==e.type?(e._dx>0?"slider"==e.type?e.scroll(-1,!0):"gallery"==e.type&&e.scrollHandler(e,"follow",-e.scrollBy):e._dx<0&&("slider"==e.type?e.scroll(1,!0):"gallery"==e.type&&e.scrollHandler(e,"follow",e.scrollBy)),e._sx=1*e._x,e._dx=0,e._lastDx=0):"slider"==e.type&&(document.querySelector(`.roundabout-${e._uniqueId}-page-wrap`).style.left=e._dx+"px")}}checkCanSnap(t,e=!1){let s=Math.abs(t._dx);t.swipeSnap?s>=t.swipeThreshold&&t.infinite||e&&t.infinite||(s>=t.swipeThreshold||e)&&!t.infinite&&(t.onPage<t.pages.length-t.pagesToShow||t.onPage==t.pages.length-t.pagesToShow&&t._dx>0)&&(t.onPage>0||0==t.onPage&&t._dx<0)?e&&Math.abs((t._ex-t._sx)/(t._ste-t._sts)*1e3)>t.swipeSpeedThreshold?t._canSnap=!0:e?t._canSnap=!1:e||(t._canSnap=!0):t._canSnap=!1:!t.infinite&&(t.onPage==t.pages.length-t.pagesToShow&&t._dx<0||0==t.onPage&&t._dx>0)?t._canSnap=!1:t._canSnap=!0}tEnd(t,e){if(!e._isAutoscrolling&&e._swipeIsAllowed){if(e._callbacks.dragEnd.forEach((e=>{e(t)})),e.interpolate.length>0)for(let t=0;t<e.pages.length;t++){let s="";e.interpolate.forEach((i=>{s.includes(i.property)||(s+=i.property+" "+e.transition/1e3+"s, "),document.querySelector(`.roundabout-${e._uniqueId}-page-${t}`).style[i.property]=""})),s=s.substr(0,s.length-2)+";",document.querySelector(`.roundabout-${e._uniqueId}-page-${t}`).style.transition="",document.querySelector(`.roundabout-${e._uniqueId}-page-${t}`).style.transition=s}e._distPercent=0,document.querySelector(`.roundabout-${e._uniqueId}-page-wrap`).classList.add(`roundabout-${e._uniqueId}-has-transition`),document.querySelector(`.roundabout-${e._uniqueId}-page-wrap`).classList.remove("roundabout-has-no-transition"),e._dragging=!1,e._t?"none"==e.rotation?e._ex=t.changedTouches[0].clientX:e._ex=e.rotation*t.changedTouches[0].clientY:"none"==e.rotation?e._ex=t.clientX:e._ex=e.rotation*t.clientY,e.swipeSnap||(e._lastDx=1*e._dx),e.swipeSpeedThreshold>0&&Math.abs(e._dx)<e.swipeThreshold&&(e._ste=Date.now(),e.checkCanSnap(e,!0)),(("slider"==e.type||"gallery"==e.type&&Math.abs(e._dx)<e.swipeThreshold)&&e.swipeSnap||!e.swipeSnap&&!e._canSnap&&e._atEnd)&&(e.snap(e._canSnap,e._dx,e),e.swipeSnap||(e._lastDx=0)),e.resetSwipeVars(e),e._abort.swipe.abort(),e._abort.swipe=new AbortController}}snap(t,e,s){t?e>0?("slider"==s.type&&s.positionWrap(!1,1),s.scrollHandler(s,"slider"==s.type?"snap":"snap-g","slider"==s.type?-1:-s.scrollBy)):e<0&&("slider"==s.type&&s.positionWrap(!1,-1),s.scrollHandler(s,"slider"==s.type?"snap":"snap-g","slider"==s.type?1:s.scrollBy)):"slider"==s.type&&s.positionWrap(!1,0)}resetSwipeVars(t){t.swipeSnap&&(t._sx=0,t._ex=0,t._x=0,t._dx=0),t._lastMove=[],t._t=!1,t._canSnap=!1}_execMM(t){this.follow(t,this)}_execMU(t){this.tEnd(t,this)}defaultHTML(t){let e=document.createElement("DIV"),s="",i="",o="";this.buttons&&(o=`<div class="roundabout-${this._uniqueId}-btn-next roundabout-btn-next roundabout-scroll-btn">${this.nextHTML}</div><div class="roundabout-${this._uniqueId}-btn-prev roundabout-btn-prev roundabout-scroll-btn">${this.prevHTML}</div>`),this.uiEnabled&&(s=`<div class="roundabout-${this._uniqueId}-ui roundabout-ui">${o}</div>`),this.swipe&&(i=`<div class="roundabout-${this._uniqueId}-swipe-overlay roundabout-swipe-overlay"></div>`);let a=`${i}<div class="roundabout-${this._uniqueId}-page-wrap roundabout-page-wrap roundabout-${this._uniqueId}-has-transition"></div>${s}`;if(t)e=document.querySelector(this.id),e.innerHTML=a;else{if(e.innerHTML=a,e.classList.add("roundabout-wrapper"),this._templateRootSelectors.classes&&e.classList.add(...this._templateRootSelectors.classes),this._templateRootSelectors.id&&(e.id=this._templateRootSelectors.id),"#"==this.id.split("")[0]){let t=this.id.split("");t.shift(),t=t.join(""),e.setAttribute("id",t)}else{let t=this.id.split("");t.shift(),t=t.join(""),e.classList.add(t)}if(this.template){let t=document.querySelector(this.template),s=Array.prototype.slice.call(t.parentNode.children).indexOf(t),i=t.parentNode;i.removeChild(t),i.insertBefore(e,i.childNodes[s+2])}else document.querySelector(this.parent).appendChild(e);document.querySelector(this.id).style.position="relative",document.querySelector(this.id).style.overflow="hidden"}document.querySelector(`.roundabout-${this._uniqueId}-page-wrap`).style.height="100%",document.querySelector(`.roundabout-${this._uniqueId}-page-wrap`).style.width="100%",document.querySelector(`.roundabout-${this._uniqueId}-page-wrap`).style.position="absolute",document.querySelector(`.roundabout-${this._uniqueId}-page-wrap`).style.left="0"}internalCSS(){let t=`.roundabout-${this._uniqueId}-has-transition {transition:${this.transition/1e3}s;transition-timing-function:${this.transitionFunction}}.roundabout-has-no-transition{transition: left 0s; !important}.roundabout-error-message {position:relative;margin:auto;left:0;right:0;top:0;bottom:0;border-radius:5px;border:3px solid black;background: white;text-align:center;font-family:sans-serif;width:30%;}`;if("gallery"==this.type){t+=`.roundabout-${this._uniqueId}-hidden-page {opacity: 0; z-index: 0; visibility: hidden;} .roundabout-fadeout {opacity: 0}`;for(let e=0;e<this.pagesToShow;e++)t+=`.roundabout-${this._uniqueId}-page-wrap .roundabout-${this._uniqueId}-visible-page-${e} {z-index: 1}`}else"slider"==this.type&&(t+=`.roundabout-${this._uniqueId}-hidden-page {visibility: hidden;}`);let e=document.createElement("STYLE");e.setAttribute("type","text/css"),e.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(e)}parseTemplate(){let t=document.querySelector(this.template);this._templateRootSelectors={classes:!!t.classList.length&&Object.values(t.classList),id:!!t?.id&&t.id};for(let e=0;e<t.childNodes.length;e++)1==t.childNodes[e].nodeType&&this._htmlTemplates.push({root:t.childNodes[e],elements:t.childNodes[e].innerHTML.trim()});if(this.pages.length||(this.pages=Array.from({length:this._htmlTemplates.length},(t=>[]))),this.pages.length&&this.pages.length<this._htmlTemplates.length)for(let t=0;t<this._htmlTemplates.length-this.pages.length+1;t++)this.pages.push([])}generatePages(){let t="";for(let e=0;e<this.pages.length;e++){let s,i,o,a=document.createElement("DIV");a.classList.add(`roundabout-${this._uniqueId}-page-${e}`,"roundabout-page",`roundabout-${this._uniqueId}-page`),"evenly"==this.pageSpacingMode?(i=1,o=0):(i=-1,o=-1);let l="calc((100% - "+(this.pagesToShow+i)*this.pageSpacing+this.pageSpacingUnits+") / "+this.pagesToShow+")";if(a.style.width=l,"slider"==this.type?e<=this.pagesToShow+2&&(s="calc((((100% - "+(this.pagesToShow+i)*this.pageSpacing+this.pageSpacingUnits+") / "+this.pagesToShow+") * "+(e-1)+") + "+(this.pageSpacing*(e+o)+this.pageSpacingUnits)+")"):"gallery"==this.type&&(s=this.calcPagePos(e)),a.style.position="absolute",this.pages[e].backgroundImage&&"none"==this.lazyLoad||this.pages[e].backgroundImage&&"hidden"==this.lazyLoad&&(e<this.pagesToShow+this.scrollBy||e>=this.pages.length-this.scrollBy))a.style.backgroundImage="url("+this.pages[e].backgroundImage+")",this.pages[e].isLoaded=!0;else if("lazy-hidden"!=this.lazyLoad||this._handledLoad)"all"!=this.lazyLoad||this._handledLoad||(this._handledLoad=!0,window.onload=()=>{"custom"!==this.lazyLoad&&this.load(this._orderedPages)});else{let t=[];for(let e=-this.scrollBy;e<this.pagesToShow+this.scrollBy;e++){let s=e/1;e<0&&(s=this.pages.length+e),t.push(s)}window.onload=()=>{"custom"!==this.lazyLoad&&this.load(t)},this._handledLoad=!0}this._htmlTemplates[e]&&(a.innerHTML+=this._htmlTemplates[e].elements,this._htmlTemplates[e].root.classList?.length&&a.classList.add(...this._htmlTemplates[e].root.classList),this._htmlTemplates[e].root.id&&(a.id=this._htmlTemplates[e].root.id)),this.pages[e].html&&("string"==typeof this.pages[e].html?a.innerHTML+=this.pages[e].html:a.appendChild(this.pages[e].html),this.pages[e].css&&(t+=this.pages[e].css)),"gallery"==this.type&&(a.style.transition=`opacity ${this.transition/1e3}s ${this.transitionFunction}`),document.querySelector(`.roundabout-${this._uniqueId}-page-wrap`).appendChild(a),this._orderedPages.push(e),"slider"==this.type?e<=this.pagesToShow+1?this._positions.push(s):this._positions.push("0px"):"gallery"==this.type&&(e<this.pagesToShow?this._positions.push(s):this._positions.push("0px")),e<this.pagesToShow&&document.querySelector(`.roundabout-${this._uniqueId}-page-${this._orderedPages[e]}`).classList.add(`roundabout-${this._uniqueId}-visible-page-${e}`)}"gallery"==this.type&&(document.querySelector(`.roundabout-${this._uniqueId}-page-wrap`).style.left=this.calcPagePos(0,{forceType:"slider"}));let e=document.createElement("STYLE");if(e.setAttribute("type","text/css"),e.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(e),this.navigation&&this.uiEnabled){let t,e=document.createElement("div");e.classList.add(`roundabout-${this._uniqueId}-nav-wrap`,"roundabout-nav-wrap"),document.querySelector(`.roundabout-${this._uniqueId}-ui`).appendChild(e);let s=1;"slider"==this.type?t=this.infinite||!this.navigationTrim?this.pages.length:this.pages.length-(this.pagesToShow-1):"gallery"==this.type&&(s=this.pagesToShow,t=Math.floor(this.pages.length/this.pagesToShow));for(let i=0;i<t;i++){let t=document.createElement("div");0==i?t.classList.add(`roundabout-${this._uniqueId}-active-nav-btn`,"roundabout-active-nav-btn"):t.classList.add(`roundabout-${this._uniqueId}-inactive-nav-btn`,"roundabout-inactive-nav-btn"),t.classList.add(`roundabout-${this._uniqueId}-nav-btn`,`roundabout-${this._uniqueId}-nav-btn-${i}`,"roundabout-nav-btn"),e.appendChild(t),t.addEventListener("click",(()=>{this.scrollTo(i*s)}),{signal:this._abort.all.signal})}}"slider"==this.type&&this._positions.push(this._positions.shift()),this.positionPages()}destroy(t=!0,e=!1){if(this._callbacks.beforeDestroy.forEach((t=>{t()})),clearTimeout(this._scrollTimeoutHolder),clearInterval(this._scrollIntervalHolder),clearTimeout(this._scrollAfterTimeoutHolder),this._abort.all.abort(),this._abort.all=new AbortController,this.pages.forEach((t=>{t.isLoaded=!1})),e)document.querySelector(this.id).remove();else if(document.querySelector(this.id).innerHTML="",t){this._positions=[],this._orderedPages=[];try{this.initialActions(!0)&&this.setListeners()}catch(t){}}this._callbacks.afterDestroy.forEach((t=>{t()}))}setBreakpoints(){let t={width:-1};this.breakpoints.forEach((e=>{e.hasOwnProperty("width"),(window.innerWidth<=e.width||screen.width<=e.width)&&(e.width<=t.width||-1==t.width)&&(t=e)})),this._currentBp!=t.width&&(this._currentBp=t.width,-1==t.width?this.activeBreakpoint={}:this.activeBreakpoint=t,this.applyBreakpoint(t))}applyBreakpoint(t){for(let t=0;t<this._overriddenValues.length;t++)this[this._overriddenValues[t][0]]=this._overriddenValues[t][1];this._overriddenValues=[];let e=Object.entries(this),s=Object.entries(t);for(let t=0;t<s.length;t++)for(let i=0;i<e.length;i++)s[t][0].toString()==e[i][0].toString()&&(this._overriddenValues.push([s[t][0].toString(),this[s[t][0]]]),this[s[t][0].toString()]=s[t][1]);this.destroy()}precomputeInterp(){this._interpolateCache.map=[],this._interpolateCache.decLength=String(this.precomputeInterpolation).split(".")[1].length,this._interpolateCache.whole=this.precomputeInterpolation*10**this._interpolateCache.decLength,this._interpolateCache.wholeDecLength=10**this._interpolateCache.decLength,this.interpolate.forEach((t=>{let e={};for(let s=0;s<1;s+=this.precomputeInterpolation){let i=this._interpolateCache.decLength,o=Number(s.toFixed(i)),a=t.curve?t.curve(s):s;e[o]=a}this._interpolateCache.map.push(e)}))}initialActions(t=!1){if(this._allowInternalStyles&&this.internalCSS(),this.template&&!t&&this.parseTemplate(),this.checkForErrors(t)){t||roundabout.on++,this._allowInternalHTML&&this.defaultHTML(t),this.autoscroll&&this.setAutoScroll(this,t),this.uiEnabled||(this.navigation=!1,this.swipe=!1),"left"==this.rotation?this.rotation=-1:"right"==this.rotation&&(this.rotation=1),"gallery"==this.type&&(this.scrollBy=this.pagesToShow);try{this.generatePages()}catch(t){}return this._interParsed||(this.interpolate=this.interpolate.map((t=>(t.values=Object.entries(t.values),t.values[0][0]=Number(t.values[0][0]),t.values[1][0]=Number(t.values[1][0]),t.values[0][0]>t.values[1][0]&&t.values.push(t.values.shift()),t))),this.precomputeInterpolation&&this.precomputeInterp(),this._interParsed=!0),this._boundFollow=this._execMM.bind(this),this._boundEnd=this._execMU.bind(this),this._boundCancel=this._execMU.bind(this),!0}return!1}setListeners(){this.uiEnabled&&this.buttons&&(document.querySelector(`.roundabout-${this._uniqueId}-btn-next`).addEventListener("click",(()=>{this.scrollHandler(this,"button",this.scrollBy)}),{signal:this._abort.all.signal}),document.querySelector(`.roundabout-${this._uniqueId}-btn-prev`).addEventListener("click",(()=>{this.scrollHandler(this,"button",-this.scrollBy)}),{signal:this._abort.all.signal})),this.keys&&document.addEventListener("keydown",(t=>{this.keyListener(t)}),{signal:this._abort.all.signal}),this.listenForResize&&setTimeout((()=>{window.addEventListener("resize",(()=>{this.setBreakpoints()}),{signal:this._abort.all.signal})}),0),this.scrollwheel&&document.querySelector(this.id).addEventListener("wheel",(t=>{t.preventDefault(),t.deltaY>0&&this.scrollHandler(this,"scroll",1),t.deltaY<0&&this.scrollHandler(this,"scroll",-1)}),{signal:this._abort.all.signal}),this._calculatedPageSize=document.querySelector(`.roundabout-${this._uniqueId}-page-0`).offsetWidth,setTimeout((()=>{window.addEventListener("resize",(()=>{this._calculatedPageSize=document.querySelector(`.roundabout-${this._uniqueId}-page-0`).offsetWidth}),{signal:this._abort.all.signal})}),0),this.autoscrollPauseOnHover&&(document.querySelector(this.id).addEventListener("mouseover",(()=>{this._autoscrollPaused=!0}),{signal:this._abort.all.signal}),document.querySelector(this.id).addEventListener("mouseout",(()=>{this._autoscrollPaused=!1,this.resetScrollTimeout(!0)}),{signal:this._abort.all.signal})),this.swipe&&(document.querySelector(`.roundabout-${this._uniqueId}-swipe-overlay`).addEventListener("mousedown",(t=>{this.tStart(t,this)}),{capture:!1,signal:this._abort.all.signal}),document.querySelector(`.roundabout-${this._uniqueId}-swipe-overlay`).addEventListener("touchstart",(t=>{this.setTouch(t,this)}),{capture:!1,signal:this._abort.all.signal}),document.querySelectorAll(`.roundabout-${this._uniqueId}-page`).forEach((t=>{t.addEventListener("mousedown",(t=>{this.tStart(t,this)}),{capture:!1,signal:this._abort.all.signal}),t.addEventListener("touchstart",(t=>{this.setTouch(t,this)}),{capture:!1,signal:this._abort.all.signal})})))}checkForErrors(t){return!!this.ignoreErrors||(this.template&&this._htmlTemplates.length<this.pages.length?(this.displayError("The number of 'pages' objects is greater than the number of pages in the template. Ensure that the number of 'pages' objects is less than or equal to the number of pages in the template."),!1):this.pages.length<2&&!this.template?(this.displayError("The minimum number of pages supported is 2."),!1):!this.template&&this.pages.length-this.pagesToShow<2||this.template&&this._htmlTemplates.length-this.pagesToShow<=0?(this.displayError("Too many pages are being displayed at once. There must be at least 2 fewer pages shown than the number of total pages."),!1):2==this.pages.length&&this.swipe&&"slider"==this.type?(this.displayError("Swipe is not supported on sliders with 2 pages."),!1):(this.pages.length||this._htmlTemplates.length||this.displayError("No pages have been supplied. Please specify a template or add pages in settings. See the documentation for details."),"#"!==this.id.split("")[0]&&"."!==this.id.split("")[0]?(this.displayError("An invalid selector prefix was given for the parent. Valid selector prefixes are '#' for IDs or '.' for classes."),!1):roundabout.usedIds.includes(this.id)&&!t?(this.displayError(`The selector '${this.id}' is already in use by another carousel. Please use a unique selector.`),!1):(roundabout.usedIds.push(this.id),this.pagesToShow<this.scrollBy&&"slider"==this.type?(this.displayError("'scrollBy' must be less than or equal to 'pagesToShow'."),!1):"gallery"==this.type&&this.navigation&&this.pages.length%this.pagesToShow!=0?(this.displayError("To enable navigation on 'gallery' mode carousels, the total number of pages must be divisible by the number of pages shown. This prevents different groups of pages corresponding the same navigation bubble."),!1):!("gallery"==this.type&&this.interpolate.length>0)||(this.displayError("Interpolation is not supported by 'gallery' mode carousels."),!1))))}load(t=[],e=this.loadTimeout,s=!1){if(clearTimeout(this._loadTimeout),t.forEach((t=>{this._loadQueue.includes(t)||this._loadQueue.push(t)})),0!=this._loadQueue.length){if(this._loadingPages||(s=!0),s)if(this.pages[this._loadQueue[0]].isLoaded)this._loadQueue.shift(),this.load(this._loadQueue,e,!0);else{this._loadingPages=!0;let t=new Image;t.onload=()=>{document.querySelector(`.roundabout-${this._uniqueId}-page-${this._loadQueue[0]}`).style.backgroundImage="url("+t.src+")",document.querySelector(`.roundabout-${this._uniqueId}-page-${this._loadQueue[0]}`).style.backgroundSize="cover",document.querySelector(`.roundabout-${this._uniqueId}-page-${this._loadQueue[0]}`).style.backgroundPosition="center center",this.pages[this._loadQueue[0]].isLoaded=!0,this._callbacks.load.forEach((t=>{t.pageId==this._loadQueue[0]&&t.callback(this._loadQueue[0])})),this._loadQueue.shift(),this.load(this._loadQueue,e,!0)},t.src=this.pages[this._loadQueue[0]].backgroundImage,this._loadTimeout=setTimeout((()=>{t.src="",t.onload=null,this._loadQueue.shift(),this.load(this._loadQueue,e,!0)}),e)}}else this._loadingPages=!1}positionPages(t=!1){for(let t=0;t<this._positions.length;t++)"0px"==this._positions[t]?(document.querySelector(`.roundabout-${this._uniqueId}-page-${t}`).classList.add(`roundabout-${this._uniqueId}-hidden-page`),document.querySelector(`.roundabout-${this._uniqueId}-page-${t}`).style.left=this._positions[t]):(document.querySelector(`.roundabout-${this._uniqueId}-page-${t}`).style.left=this._positions[t],document.querySelector(`.roundabout-${this._uniqueId}-page-${t}`).classList.remove(`roundabout-${this._uniqueId}-hidden-page`),!this.infinite&&0==t&&this.onPage>1&&!this.showWrappedPage&&document.querySelector(`.roundabout-${this._uniqueId}-page-${t}`).classList.add(`roundabout-${this._uniqueId}-hidden-page`),this.infinite||t!=this._positions.length-1||0!=this.onPage||this.showWrappedPage||document.querySelector(`.roundabout-${this._uniqueId}-page-${this._positions.length-1}`).classList.add(`roundabout-${this._uniqueId}-hidden-page`))}positionWrap(t=!0,e=0){let s=document.querySelector(`.roundabout-${this._uniqueId}-page-wrap`);t&&(s.classList.remove(`roundabout-${this._uniqueId}-has-transition`),s.classList.add("roundabout-has-no-transition")),s.style.left=this.calcPagePos(e,{wrap:!0});s.offsetWidth;t&&(s.classList.add(`roundabout-${this._uniqueId}-has-transition`),s.classList.remove("roundabout-has-no-transition"))}findOffset(t,e,s){return"p"==s?e<t?t-e:t+this.pages.length-e:"n"==s?e<t?this.pages.length-t+e:e-t:void 0}keyListener(t){switch(t.key){case"ArrowLeft":this.scrollHandler(this,"key",-this.scrollBy);break;case"ArrowRight":this.scrollHandler(this,"key",this.scrollBy);break}}calcPagePos(t,e={wrap:!1,forceType:this.type,direction:null,raw:!1}){if(null==e.forceType&&(e.forceType=this.type),0==t&&"slider"==e.forceType&&!e.raw&&("fill"==this.pageSpacingMode||e.wrap))return"0px";if("gallery"==e.forceType){if(e.direction>0&&t>=2*this.pagesToShow)return"0px";if(e.direction<0&&(t<-this.pagesToShow||t>=this.pagesToShow))return"0px";if(-1==t)return"0px"}"slider"==e.forceType&&(t+=1);let s,i,o,a=0;return"evenly"==this.pageSpacingMode?(s=1,i=0,e.wrap&&(a=-this.pageSpacing)):(s=-1,i="slider"==e.forceType?-1:0),"slider"==e.forceType?o="calc((((100% - "+(this.pagesToShow+s)*this.pageSpacing+this.pageSpacingUnits+") / "+this.pagesToShow+") * "+(t-1)+") + "+(this.pageSpacing*(t+i)+a+this.pageSpacingUnits)+")":"gallery"==e.forceType&&(o="calc((((100% - "+(this.pagesToShow+s)*this.pageSpacing+this.pageSpacingUnits+") / "+this.pagesToShow+") * "+t%this.pagesToShow+") + "+(this.pageSpacing*(t%this.pagesToShow+i)+a+this.pageSpacingUnits)+")"),o}subscribe(t,e){this._callbacks[t].push(e)}displayError(t,e="Error:"){let s=document.createElement("DIV");s.classList.add("roundabout-error-message");let i=document.createElement("SPAN");i.innerHTML=e,i.style.color="red",i.style.fontWeight="bold",s.appendChild(i);let o=document.createElement("SPAN");o.innerHTML=t;let a=document.createElement("BR");s.appendChild(a),s.appendChild(o),document.querySelector(this.parent).appendChild(s)}}