let roundabout={on:-1,usedIds:[],overwritten:"no",defaults:{pages:[],breakpoints:[{width:300,height:0,swipeThreshold:50}],listenForResize:!1,id:".myCarousel",parent:"body",lazyLoad:"none",uiEnabled:!0,type:"normal",infinite:!0,keys:!0,buttons:!0,swipe:!0,swipeThreshold:300,swipeMultiplier:1,swipeResistance:.95,pagesToShow:1,pageSpacing:0,pageSpacingUnits:"px",pageSpacingMode:"fill",scrollBy:1,showWrappedPage:!1,transition:300,transitionFunction:"ease",navigation:!0,navigationTrim:!0,navigationBehavior:"nearest",autoscroll:!1,autoscrollSpeed:5e3,autoscrollTimeout:15e3,autoscrollPauseOnHover:!1,autoscrollStartAfter:5e3,autoscrollDirection:"right",throttle:!0,throttleTimeout:300,throttleKeys:!0,throttleSwipe:!0,throttleButtons:!0,throttleNavigation:!0,nextHTML:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>',prevHTML:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z" /></svg>',initOnly:!1}};class Roundabout{constructor(e=roundabout.defaults){roundabout.overwritten&&"no"==roundabout.overwritten||console.error('Do not redefine the variable "roundabout". Roundabout requires this variable to store data across multiple carousels.');let t=Object.entries(e),s=Object.entries(roundabout.defaults);this.VERSION="1.3.0";for(let e=0;e<s.length;e++){let i=!1;for(let o=0;o<t.length;o++){if(!roundabout.defaults.hasOwnProperty(t[o][0]))throw`Error: Invalid Roundabout setting: "${t[o][0]}"`;if(t[o][0].toString()==s[e][0].toString()){this[t[o][0].toString()]=t[o][1],i=!0;break}}!i&&roundabout.defaults.hasOwnProperty(s[e][0])&&(this[s[e][0].toString()]=s[e][1])}if(this.orderedPages=[],this.positions=[],this.orderedPagesMainIndex=0,this.scrollIsAllowed=!0,this.onPage=0,this.handledLoad=!1,this.loadQueue=[],this.loadingPages=!1,this.uniqueId=roundabout.on+1,this.overriddenValues=[],this.currentBp=-2,this.allowInternalStyles=!0,this.allowInternalHTML=!0,this.sx=0,this.sy=0,this.ex=0,this.ey=0,this.dx=0,this.x=0,this.y=0,this.lastMove=null,this.t=!1,this.dragging=!1,this.canSnap=!1,this.swipeFrom=0,this.swipeIsAllowed=!0,this.scrollTimeoutHolder=null,this.scrollIntervalHolder=null,this.scrollAfterTimeoutHolder=null,this.boundFollow=null,this.boundEnd=null,this.boundCancel=null,!this.initOnly){this.initialActions();try{this.setBreakpoints()}catch(e){console.error(`Error while attempting to set breakpoint values in Roundabout with id ${this.id}:`),console.error(e)}try{this.setListeners()}catch(e){console.error(`Error while attempting to add event listeners to Roundabout with id ${this.id}:`),console.error(e)}}}scrollNext(e,t=!1,s=0){if(!(this.onPage>=this.pages.length-this.pagesToShow)||this.infinite||"normal"!=this.type)if(e>this.pages.length-this.pagesToShow-this.onPage&&!this.infinite){let s=this.pages.length-this.pagesToShow-this.onPage;this.scrollNext(s,t,e-s)}else{let i=document.querySelector(`.roundabout-${this.uniqueId}-page-wrap`);for(let e=0;e<this.positions.length;e++){let t=this.calcPagePos(e);"0px"!=t&&document.querySelector(`.roundabout-${this.uniqueId}-page-${this.orderedPages[e]}`).classList.remove("roundabout-hidden-page"),document.querySelector(`.roundabout-${this.uniqueId}-page-${this.orderedPages[e]}`).style.left=t}t||(i.style.left=this.calcPagePos(-e,!0));for(let t=0;t<e;t++)this.positions.unshift(this.positions.pop()),this.orderedPages.push(this.orderedPages.shift());for(let e=0;e<this.pagesToShow;e++)document.querySelector(`.roundabout-${this.uniqueId}-visible-page-${e}`).classList.remove(`roundabout-${this.uniqueId}-visible-page-${e}`),document.querySelector(`.roundabout-${this.uniqueId}-page-${this.orderedPages[e]}`).classList.add(`roundabout-${this.uniqueId}-visible-page-${e}`);this.onPage+=e,this.onPage>=this.pages.length&&(this.onPage-=this.pages.length),t?(this.positionWrap(!t),this.positionPages()):setTimeout(()=>{this.positionWrap(!t),this.positionPages()},this.transition),this.navigation&&this.setActiveBtn(this.onPage+s),"hidden"==this.lazyLoad&&this.load(this.orderedPages.slice(this.pagesToShow,this.pagesToShow+this.scrollBy))}}scrollPrevious(e,t=!1){if(!(this.onPage<=0)||this.infinite||"normal"!=this.type)if(Math.abs(e)>this.onPage&&!this.infinite){let e=-1*this.onPage;this.scrollPrevious(e,t)}else{let s=document.querySelector(`.roundabout-${this.uniqueId}-page-wrap`),i=[];for(let t=0;t<this.positions.length;t++)i.push(t-Math.abs(e));for(let t=0;t<Math.abs(e);t++)i.push(i.shift());for(let e=0;e<this.positions.length;e++){let t=this.calcPagePos(i[e]);"0px"!=t&&document.querySelector(`.roundabout-${this.uniqueId}-page-${this.orderedPages[e]}`).classList.remove("roundabout-hidden-page"),document.querySelector(`.roundabout-${this.uniqueId}-page-${this.orderedPages[e]}`).style.left=t}t||(s.style.left=this.calcPagePos(-e,!0));for(let t=0;t<Math.abs(e);t++)this.positions.push(this.positions.shift()),this.orderedPages.unshift(this.orderedPages.pop());this.onPage+=e,this.onPage<0&&(this.onPage+=this.pages.length),t?(this.positionWrap(!t),this.positionPages()):setTimeout(()=>{this.positionWrap(!t),this.positionPages()},this.transition),this.navigation&&this.setActiveBtn(this.onPage),"hidden"==this.lazyLoad&&this.load(this.orderedPages.slice(this.orderedPages.length-this.scrollBy,this.orderedPages.length))}}scrollTo(e){if(this.scrollIsAllowed&&this.throttleNavigation&&this.navigation?this.setActiveBtn(e):!this.throttleNavigation&&this.navigation&&this.setActiveBtn(e),"hidden"==this.lazyLoad){let t=[];for(let s=-this.scrollBy;s<this.pagesToShow+this.scrollBy;s++){let i=(s+e)%this.orderedPages.length;i<0&&(i+=this.orderedPages.length),t.push(this.orderedPages[i])}this.load(t)}this.infinite&&"direction"!=this.navigationBehavior?this.findOffset(this.onPage,e,"p")<this.findOffset(this.onPage,e,"n")?this.throttleNavigation?this.previousHandler(this,"scrollto",-1*this.findOffset(this.onPage,e,"p")):this.scrollPrevious(-1*this.findOffset(this.onPage,e,"p")):this.throttleNavigation?this.nextHandler(this,"scrollto",this.findOffset(this.onPage,e,"n")):this.scrollNext(this.findOffset(this.onPage,e,"n")):e<this.onPage?this.throttleNavigation?this.previousHandler(this,"scrollto",e-this.onPage):this.scrollPrevious(e-this.onPage):this.throttleNavigation?this.nextHandler(this,"scrollto",e-this.onPage):this.scrollNext(e-this.onPage)}setActiveBtn(e){document.querySelector(`.roundabout-${this.uniqueId}-active-nav-btn`).classList.add(`roundabout-${this.uniqueId}-inactive-nav-btn`,"roundabout-inactive-nav-btn"),document.querySelector(`.roundabout-${this.uniqueId}-active-nav-btn`).classList.remove(`roundabout-${this.uniqueId}-active-nav-btn`,"roundabout-active-nav-btn"),document.querySelector(`.roundabout-${this.uniqueId}-nav-btn-${e}`).classList.add(`roundabout-${this.uniqueId}-active-nav-btn`,"roundabout-active-nav-btn"),document.querySelector(`.roundabout-${this.uniqueId}-nav-btn-${e}`).classList.remove(`roundabout-${this.uniqueId}-inactive-nav-btn`,"roundabout-inactive-nav-btn")}nextHandler(e,t,s){let i;i="snap"==t?1:"scrollto"==t?s:e.scrollBy,e.resetScrollTimeout(),e.scrollIsAllowed&&!e.dragging&&(e.scrollNext(i,!1),(e.throttle&&e.throttleButtons&&"key"!=t||e.throttle&&e.throttleKeys&&"key"==t)&&(e.scrollIsAllowed=!1,setTimeout(()=>{e.scrollIsAllowed=!0},e.throttleTimeout)))}previousHandler(e,t,s){let i;i="snap"==t?-1:"scrollto"==t?s:-e.scrollBy,e.resetScrollTimeout(),e.scrollIsAllowed&&!e.dragging&&(e.scrollPrevious(i,!1),(e.throttle&&e.throttleButtons&&"key"!=t||e.throttle&&e.throttleKeys&&"key"==t)&&(e.scrollIsAllowed=!1,setTimeout(()=>{e.scrollIsAllowed=!0},e.throttleTimeout)))}resetScrollTimeout(e=!1){clearTimeout(this.scrollTimeoutHolder),clearInterval(this.scrollIntervalHolder),this.scrollTimeoutHolder=setTimeout(()=>{e&&this.scrollAuto(this),this.setAutoScroll(this)},this.autoscrollTimeout)}setAutoScroll(e,t=!1){t&&e.autoscroll?e.scrollAfterTimeoutHolder=setTimeout(()=>{e.scrollAuto(e),e.scrollIntervalHolder=setInterval(()=>{e.scrollAuto(e)},e.autoscrollSpeed)},e.autoscrollStartAfter):e.autoscroll&&(e.scrollIntervalHolder=setInterval(()=>{e.scrollAuto(e)},e.autoscrollSpeed))}scrollAuto(e){"left"==e.autoscrollDirection.toLowerCase()&&e.scrollIsAllowed?e.scrollPrevious(-this.scrollBy):"right"==e.autoscrollDirection.toLowerCase()&&e.scrollIsAllowed&&e.scrollNext(this.scrollBy)}setTouch(e,t){e.preventDefault(),t.t=!0,t.tStart(e,t)}tStart(e,t){if(t.resetScrollTimeout(),t.throttleSwipe){if(!t.swipeIsAllowed)return;t.throttle&&(t.swipeIsAllowed=!1)}e.preventDefault(),t.dragging=!0,t.swipeFrom=t.orderedPages[t.orderedPagesMainIndex],document.querySelector(`.roundabout-${t.uniqueId}-page-wrap`).classList.remove(`roundabout-${this.uniqueId}-has-transition`),document.querySelector(`.roundabout-${t.uniqueId}-page-wrap`).classList.add("roundabout-has-no-transition"),t.lastMove=e.touches,t.t?(t.x=e.touches[0].clientX,t.y=e.touches[0].clientY,t.sx=e.touches[0].clientX,t.sy=e.touches[0].clientY):(t.x=e.clientX,t.y=e.clientY,t.sx=e.clientX,t.sy=e.clientY),document.addEventListener("mousemove",t.boundFollow,!1),document.addEventListener("mouseup",t.boundEnd,!1),t.t&&(document.addEventListener("touchmove",t.boundFollow,!1),document.addEventListener("touchend",t.boundEnd,!1),document.addEventListener("touchcancel",t.boundCancel,!1))}follow(e,t){if(t.dragging){t.t?(t.x=e.changedTouches[0].clientX,t.y=e.changedTouches[0].clientY):(t.x=e.clientX,t.y=e.clientY),t.dx=(t.x-t.sx)*t.swipeMultiplier,Math.abs(t.dx)<document.querySelector(t.parent).offsetWidth&&t.infinite?t.dx=(t.x-t.sx)*t.swipeMultiplier:t.dx<0?t.infinite?t.dx-=(t.dx+document.querySelector(t.parent).offsetWidth)*t.swipeResistance:t.pages.length-t.pagesToShow==t.onPage&&(1==t.swipeResistance?t.dx=0:t.dx-=t.dx*t.swipeResistance):t.dx>0&&(t.infinite?t.dx-=(t.dx-document.querySelector(t.parent).offsetWidth)*t.swipeResistance:0===t.orderedPages[t.orderedPagesMainIndex]&&(1==t.swipeResistance?t.dx=0:t.dx-=t.dx*t.swipeResistance));let s=Math.abs(t.dx);s>=t.swipeThreshold&&t.infinite||s>=t.swipeThreshold&&!t.infinite&&(t.onPage<t.pages.length-t.pagesToShow||t.onPage==t.pages.length-t.pagesToShow&&t.dx>0)&&(t.onPage>0||0==t.onPage&&t.dx<0)?t.canSnap=!0:t.canSnap=!1;let i=document.querySelector(`.roundabout-${t.uniqueId}-page-`+t.orderedPages[t.orderedPagesMainIndex]).offsetWidth+t.pageSpacing;s>=i&&t.infinite||s>=i&&!t.infinite&&(t.onPage<t.pages.length-t.pagesToShow||t.onPage==t.pages.length-t.pagesToShow&&t.dx>0)&&(t.onPage>0||0==t.onPage&&t.dx<0)?(t.dx>0?t.scrollPrevious(-1,!0):t.dx<0&&t.scrollNext(1,!0),t.sx=t.x/1,t.dx=0):document.querySelector(`.roundabout-${t.uniqueId}-page-wrap`).style.left=t.dx+"px"}}tEnd(e,t){setTimeout(()=>{t.swipeIsAllowed=!0},t.throttleTimeout),document.querySelector(`.roundabout-${t.uniqueId}-page-wrap`).classList.add(`roundabout-${this.uniqueId}-has-transition`),document.querySelector(`.roundabout-${t.uniqueId}-page-wrap`).classList.remove("roundabout-has-no-transition"),t.dragging=!1,t.t?(t.ex=e.changedTouches[0].clientX,t.ey=e.changedTouches[0].clientY):(t.ex=e.clientX,t.ey=e.clientY),t.snap(t.canSnap,t.dx,t),t.resetSwipeVars(t),document.removeEventListener("mousemove",t.boundFollow,!1),document.removeEventListener("mouseup",t.boundEnd,!1),document.removeEventListener("touchmove",t.boundFollow,!1),document.removeEventListener("touchend",t.boundEnd,!1),document.removeEventListener("touchcancel",t.boundCancel,!1)}tCancel(e,t){e.preventDefault(),document.removeEventListener("mouseup",e=>{t.tEnd(e,t)},!1),document.removeEventListener("touchend",e=>{t.tEnd(e,t)},!1),document.removeEventListener("touchcancel",e=>{t.tCancel(e,t)},!1)}snap(e,t,s){e?t>0?(s.previousHandler(s,"snap"),s.positionWrap(!1,1)):t<0&&(s.nextHandler(s,"snap"),s.positionWrap(!1,-1)):s.positionWrap(!1,0)}resetSwipeVars(e){e.sx=0,e.sy=0,e.ex=0,e.ey=0,e.x=0,e.y=0,e.dx=0,e.lastMove=[],e.t=!1,e.canSnap=!1}execMM(e){this.follow(e,this)}execMU(e){this.tEnd(e,this)}execTC(e){this.tCancel(e,this)}defaultHTML(e){let t=document.createElement("DIV"),s="",i="",o="";this.buttons&&(o=`<div class="roundabout-${this.uniqueId}-btn-next roundabout-btn-next roundabout-scroll-btn">${this.nextHTML}</div><div class="roundabout-${this.uniqueId}-btn-prev roundabout-btn-prev roundabout-scroll-btn">${this.prevHTML}</div>`),this.uiEnabled&&(s=`<div class="roundabout-${this.uniqueId}-ui roundabout-ui">${o}</div>`),this.swipe&&(i=`<div class="roundabout-${this.uniqueId}-swipe-overlay roundabout-swipe-overlay"></div>`);let n=`${i}<div class="roundabout-${this.uniqueId}-page-wrap roundabout-page-wrap roundabout-${this.uniqueId}-has-transition"></div>${s}`;if(e)t=document.querySelector(this.id),t.innerHTML=n;else{if(t.innerHTML=n,t.classList.add("roundabout-wrapper"),"#"==this.id.split("")[0]){let e=this.id.split("");e.shift(),e=e.join(""),t.setAttribute("id",e)}else{let e=this.id.split("");e.shift(),e=e.join(""),t.classList.add(e)}document.querySelector(this.parent).appendChild(t),document.querySelector(this.id).style.position="relative",document.querySelector(this.id).style.overflow="hidden"}document.querySelector(`.roundabout-${this.uniqueId}-page-wrap`).style.height="100%",document.querySelector(`.roundabout-${this.uniqueId}-page-wrap`).style.width="100%",document.querySelector(`.roundabout-${this.uniqueId}-page-wrap`).style.position="absolute",document.querySelector(`.roundabout-${this.uniqueId}-page-wrap`).style.left="0"}internalCSS(){let e=`.roundabout-${this.uniqueId}-has-transition {transition:${this.transition/1e3}s;transition-timing-function:${this.transitionFunction}}.roundabout-has-no-transition{transition:none;}.roundabout-hidden-page {visibility: hidden}.roundabout-error-message {position:relative;margin:auto;left:0;right:0;top:0;bottom:0;border-radius:5px;border:3px solid black;background: white;text-align:center;font-family:sans-serif;width:30%;}`,t=document.createElement("STYLE");t.setAttribute("type","text/css"),t.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(t)}generatePages(){let e="";for(let t=0;t<this.pages.length;t++){let s,i=document.createElement("DIV");if(i.classList.add(`roundabout-${this.uniqueId}-page-${t}`,"roundabout-page"),"normal"==this.type){let e,o;"evenly"==this.pageSpacingMode?(e=1,o=0):(e=-1,o=-1);let n="calc((100% - "+(this.pagesToShow+e)*this.pageSpacing+this.pageSpacingUnits+") / "+this.pagesToShow+")";i.style.width=n,t<=this.pagesToShow+2&&(s="calc((((100% - "+(this.pagesToShow+e)*this.pageSpacing+this.pageSpacingUnits+") / "+this.pagesToShow+") * "+(t-1)+") + "+(this.pageSpacing*(t+o)+this.pageSpacingUnits)+")")}else i.style.width="100%";i.style.position="absolute",this.pages[t].backgroundImage&&"none"==this.lazyLoad||this.pages[t].backgroundImage&&"hidden"==this.lazyLoad&&(t<this.pagesToShow+this.scrollBy||t>=this.pages.length-this.scrollBy)?(i.style.backgroundImage="url("+this.pages[t].backgroundImage+")",this.pages[t].isLoaded=!0):"all"!=this.lazyLoad||this.handledLoad||(this.handledLoad=!0,window.addEventListener("load",()=>{this.load(this.orderedPages)})),this.pages[t].html&&(i.innerHTML=this.pages[t].html,this.pages[t].css&&(e+=this.pages[t].css)),document.querySelector(`.roundabout-${this.uniqueId}-page-wrap`).appendChild(i),this.orderedPages.push(t),t<=this.pagesToShow+1?this.positions.push(s):this.positions.push("0px"),t<this.pagesToShow&&document.querySelector(`.roundabout-${this.uniqueId}-page-${this.orderedPages[t]}`).classList.add(`roundabout-${this.uniqueId}-visible-page-${t}`)}let t=document.createElement("STYLE");if(t.setAttribute("type","text/css"),t.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(t),this.navigation&&this.uiEnabled){let e,t=document.createElement("div");t.classList.add(`roundabout-${this.uniqueId}-nav-wrap`,"roundabout-nav-wrap"),document.querySelector(`.roundabout-${this.uniqueId}-ui`).appendChild(t),"normal"==this.type&&(e=this.infinite||!this.navigationTrim?this.pages.length:this.pages.length-(this.pagesToShow-1));for(let s=0;s<e;s++){let e=document.createElement("div");0==s?e.classList.add(`roundabout-${this.uniqueId}-active-nav-btn`,"roundabout-active-nav-btn"):e.classList.add(`roundabout-${this.uniqueId}-inactive-nav-btn`,"roundabout-inactive-nav-btn"),e.classList.add(`roundabout-${this.uniqueId}-nav-btn`,`roundabout-${this.uniqueId}-nav-btn-${s}`,"roundabout-nav-btn"),t.appendChild(e),e.addEventListener("click",()=>{this.scrollTo(s)})}}this.positions.push(this.positions.shift()),this.positionPages()}destroy(e=!0,t=!1){if(clearTimeout(this.scrollTimeoutHolder),clearInterval(this.scrollIntervalHolder),clearTimeout(this.scrollAfterTimeoutHolder),t)document.querySelector(this.id).remove();else if(document.querySelector(this.id).innerHTML="",e){this.positions=[],this.orderedPages=[];try{this.initialActions(!0)}catch(e){console.error(`Error while attempting to regenerate Roundabout with id ${this.id}:`),console.error(e)}}}setBreakpoints(){let e={width:-1};this.breakpoints.forEach(t=>{t.hasOwnProperty("width")||console.error("Breakpoint is missing a 'width' property, which defines the screen or window size to apply at."),(window.innerWidth<=t.width||screen.width<=t.width)&&(t.width<=e.width||-1==e.width)&&(e=t)}),this.currentBp!=e.width&&(this.currentBp=e.width,this.applyBreakpoint(e))}applyBreakpoint(e){for(let e=0;e<this.overriddenValues.length;e++)this[this.overriddenValues[e][0]]=this.overriddenValues[e][1];this.overriddenValues=[];let t=Object.entries(this),s=Object.entries(e);for(let e=0;e<s.length;e++)for(let i=0;i<t.length;i++)s[e][0].toString()==t[i][0].toString()&&(this.overriddenValues.push([s[e][0].toString(),this[s[e][0]]]),this[s[e][0].toString()]=s[e][1]);this.destroy()}initialActions(e=!1){if(this.allowInternalStyles&&this.internalCSS(),this.checkForErrors(e)){e||roundabout.on++,this.allowInternalHTML&&this.defaultHTML(e),this.autoscroll&&this.setAutoScroll(this,!0),this.uiEnabled||(this.navigation=!1,this.swipe=!1);try{this.generatePages()}catch(e){console.error(`Error while attempting to generate Roundabout with id ${this.id}:`),console.error(e)}this.boundFollow=this.execMM.bind(this),this.boundEnd=this.execMU.bind(this),this.boundCancel=this.execTC.bind(this)}}setListeners(){this.uiEnabled&&(document.querySelector(`.roundabout-${this.uniqueId}-btn-next`).addEventListener("click",()=>{this.nextHandler(this)}),document.querySelector(`.roundabout-${this.uniqueId}-btn-prev`).addEventListener("click",()=>{this.previousHandler(this)})),this.keys&&document.addEventListener("keydown",e=>{switch(e.key){case"ArrowLeft":this.previousHandler(this,"key");break;case"ArrowRight":this.nextHandler(this,"key")}}),this.listenForResize&&setTimeout(()=>{window.addEventListener("resize",()=>{this.setBreakpoints()})},0),this.autoscrollPauseOnHover&&(document.querySelector(this.parent).addEventListener("mouseover",()=>{this.scrollIsAllowed=!1}),document.querySelector(this.parent).addEventListener("mouseout",()=>{this.scrollIsAllowed=!0,this.resetScrollTimeout(!0)})),this.swipe&&(document.querySelector(`.roundabout-${this.uniqueId}-swipe-overlay`).addEventListener("mousedown",e=>{this.tStart(e,this)},!1),document.querySelector(`.roundabout-${this.uniqueId}-swipe-overlay`).addEventListener("touchstart",e=>{this.setTouch(e,this)},!1))}checkForErrors(e){return this.pages.length<2?(this.displayError("The minimum number of pages supported is 2."),!1):this.pages.length-this.pagesToShow<=0?(this.displayError("Too many of the given pages are being displayed. There must be at least 2 fewer pages shown than the number of pages supplied."),!1):this.pages.length<=2&&this.swipe?(this.displayError("Swipe is not supported with fewer than 3 pages"),!1):(0!=this.pages.length&&this.pages.length||this.displayError("No pages have been supplied. Please create a 'pages' array containing your pages. See the documentation for details."),"#"!==this.id.split("")[0]&&"."!==this.id.split("")[0]?(this.displayError("An invalid selector prefix was given for the parent. Valid selector prefixes are '#' for IDs or '.' for classes."),!1):roundabout.usedIds.includes(this.id)&&!e?(this.displayError(`The selector ${this.id} is already in use by another carousel. Please use a unique selector.`),!1):(roundabout.usedIds.push(this.id),!(this.pagesToShow<this.scrollBy)||(this.displayError("'scrollBy' must be less than or equal to 'pagesToShow'."),!1)))}load(e=[],t=!1){if(e.forEach(e=>{this.loadQueue.includes(e)||this.loadQueue.push(e)}),0!=this.loadQueue.length){if(this.loadingPages||(t=!0),t)if(this.pages[this.loadQueue[0]].isLoaded)this.loadQueue=this.loadQueue.splice(1,this.loadQueue.length-1),this.load(this.loadQueue,!0);else{this.loadingPages=!0;let e=new Image;e.onload=(()=>{document.querySelector(`.roundabout-${this.uniqueId}-page-${this.loadQueue[0]}`).style.backgroundImage="url("+e.src+")",document.querySelector(`.roundabout-${this.uniqueId}-page-${this.loadQueue[0]}`).style.backgroundSize="cover",document.querySelector(`.roundabout-${this.uniqueId}-page-${this.loadQueue[0]}`).style.backgroundPosition="center center",this.pages[this.loadQueue[0]].isLoaded=!0,this.loadQueue=this.loadQueue.splice(1,this.loadQueue.length-1),this.load(this.loadQueue,!0)}),e.src=this.pages[this.loadQueue[0]].backgroundImage}}else this.loadingPages=!1}positionPages(){for(let e=0;e<this.positions.length;e++)"0px"==this.positions[e]?(document.querySelector(`.roundabout-${this.uniqueId}-page-${e}`).classList.add("roundabout-hidden-page"),document.querySelector(`.roundabout-${this.uniqueId}-page-${e}`).style.left=this.positions[e]):(document.querySelector(`.roundabout-${this.uniqueId}-page-${e}`).style.left=this.positions[e],document.querySelector(`.roundabout-${this.uniqueId}-page-${e}`).classList.remove("roundabout-hidden-page"),!this.infinite&&0==e&&this.onPage>1&&!this.showWrappedPage&&document.querySelector(`.roundabout-${this.uniqueId}-page-${e}`).classList.add("roundabout-hidden-page"),this.infinite||e!=this.positions.length-1||0!=this.onPage||this.showWrappedPage||document.querySelector(`.roundabout-${this.uniqueId}-page-${this.positions.length-1}`).classList.add("roundabout-hidden-page"))}positionWrap(e=!0,t=0){let s=document.querySelector(`.roundabout-${this.uniqueId}-page-wrap`);e&&(s.classList.remove(`roundabout-${this.uniqueId}-has-transition`),s.classList.add("roundabout-has-no-transition")),s.style.left=this.calcPagePos(t,!0);s.offsetWidth;e&&(s.classList.add(`roundabout-${this.uniqueId}-has-transition`),s.classList.remove("roundabout-has-no-transition"))}findOffset(e,t,s){return"p"==s?t<e?e-t:e+this.pages.length-t:"n"==s?t<e?this.pages.length-e+t:t-e:void 0}calcPagePos(e,t){if(0==e&&("fill"==this.pageSpacingMode||t))return"0px";e+=1;let s,i,o=0;"evenly"==this.pageSpacingMode?(s=1,i=0,t&&(o=-this.pageSpacing)):(s=-1,i=-1);let n="calc((((100% - "+(this.pagesToShow+s)*this.pageSpacing+this.pageSpacingUnits+") / "+this.pagesToShow+") * "+(e-1)+") + "+(this.pageSpacing*(e+i)+o+this.pageSpacingUnits)+")";return n}displayError(e,t="Error:"){let s=document.createElement("DIV");s.classList.add("roundabout-error-message");let i=document.createElement("SPAN");i.innerHTML=t,i.style.color="red",i.style.fontWeight="bold",s.appendChild(i);let o=document.createElement("SPAN");o.innerHTML=e;let n=document.createElement("BR");s.appendChild(n),s.appendChild(o),document.querySelector(this.parent).appendChild(s),console.error(e)}}